# ç”µæ°”è®¾å¤‡çŠ¶æ€æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunshansj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://gitee.com/qunmasj/projects)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€å·¥ä¸šè‡ªåŠ¨åŒ–å’Œæ™ºèƒ½åŒ–çš„è¿…é€Ÿå‘å±•ï¼Œç”µæ°”è®¾å¤‡çš„çŠ¶æ€ç›‘æµ‹ä¸æ•…éšœè¯Šæ–­åœ¨ä¿éšœç”µåŠ›ç³»ç»Ÿå®‰å…¨ã€æé«˜è®¾å¤‡è¿è¡Œæ•ˆç‡æ–¹é¢å˜å¾—æ„ˆå‘é‡è¦ã€‚ä¼ ç»Ÿçš„ç”µæ°”è®¾å¤‡çŠ¶æ€æ£€æµ‹æ–¹æ³•ä¸»è¦ä¾èµ–äººå·¥å·¡æ£€å’Œå®šæœŸç»´æŠ¤ï¼Œè¿™ä¸ä»…è€—æ—¶è€—åŠ›ï¼Œè€Œä¸”åœ¨ä¸€å®šç¨‹åº¦ä¸Šå®¹æ˜“å—åˆ°äººä¸ºå› ç´ çš„å½±å“ï¼Œå¯¼è‡´æ£€æµ‹ç»“æœçš„å‡†ç¡®æ€§å’ŒåŠæ—¶æ€§ä¸è¶³ã€‚å› æ­¤ï¼ŒåŸºäºè®¡ç®—æœºè§†è§‰å’Œæ·±åº¦å­¦ä¹ æŠ€æœ¯çš„è‡ªåŠ¨åŒ–æ£€æµ‹ç³»ç»Ÿé€æ¸æˆä¸ºç ”ç©¶çš„çƒ­ç‚¹ã€‚å°¤å…¶æ˜¯YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—ç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œä»¥å…¶é«˜æ•ˆæ€§å’Œå®æ—¶æ€§åœ¨å„ç±»è§†è§‰è¯†åˆ«ä»»åŠ¡ä¸­å±•ç°å‡ºäº†ä¼˜è¶Šçš„æ€§èƒ½ã€‚

YOLOv8ä½œä¸ºYOLOç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå…·å¤‡äº†æ›´å¼ºçš„ç‰¹å¾æå–èƒ½åŠ›å’Œæ›´å¿«çš„æ¨ç†é€Ÿåº¦ï¼Œé€‚åˆäºå¤æ‚ç¯å¢ƒä¸‹çš„å®æ—¶ç›®æ ‡æ£€æµ‹ã€‚ç„¶è€Œï¼Œé’ˆå¯¹ç”µæ°”è®¾å¤‡çŠ¶æ€æ£€æµ‹çš„å…·ä½“åº”ç”¨åœºæ™¯ï¼ŒYOLOv8ä»éœ€è¿›è¡Œä¸€å®šçš„æ”¹è¿›å’Œä¼˜åŒ–ï¼Œä»¥é€‚åº”ç”µæ°”è®¾å¤‡å¤šæ ·åŒ–çš„å¤–è§‚å’ŒçŠ¶æ€å˜åŒ–ã€‚å› æ­¤ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„ç”µæ°”è®¾å¤‡çŠ¶æ€æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶å…·æœ‰é‡è¦çš„ç°å®æ„ä¹‰ã€‚

æœ¬ç ”ç©¶æ‰€ä½¿ç”¨çš„æ•°æ®é›†â€œdistribution_roomâ€åŒ…å«2800å¼ ç”µæ°”è®¾å¤‡çš„å›¾åƒï¼Œæ¶µç›–äº†11ä¸ªç±»åˆ«ï¼ŒåŒ…æ‹¬ä¸åŒçŠ¶æ€çš„ç”µæ°”è®¾å¤‡ï¼ˆå¦‚è¿æ¥ã€æ–­å¼€ï¼‰åŠå…¶é¢œè‰²æ ‡è¯†ï¼ˆå¦‚çº¢è‰²ã€ç»¿è‰²ã€é»„è‰²ç­‰ï¼‰ã€‚è¿™äº›ç±»åˆ«ä¸ä»…åæ˜ äº†è®¾å¤‡çš„å·¥ä½œçŠ¶æ€ï¼Œè¿˜æä¾›äº†ä¸°å¯Œçš„è§†è§‰ä¿¡æ¯ï¼Œæœ‰åŠ©äºç®—æ³•çš„è®­ç»ƒå’Œæµ‹è¯•ã€‚é€šè¿‡å¯¹è¿™äº›æ•°æ®çš„æ·±å…¥åˆ†æå’Œå¤„ç†ï¼Œå¯ä»¥æœ‰æ•ˆæå‡æ¨¡å‹å¯¹ç”µæ°”è®¾å¤‡çŠ¶æ€çš„è¯†åˆ«ç²¾åº¦ã€‚

æ”¹è¿›YOLOv8çš„ç”µæ°”è®¾å¤‡çŠ¶æ€æ£€æµ‹ç³»ç»Ÿï¼Œæ—¨åœ¨é€šè¿‡ä¼˜åŒ–æ¨¡å‹ç»“æ„ã€å¢å¼ºæ•°æ®é¢„å¤„ç†å’Œæ‰©å……æ•°æ®é›†ï¼Œæå‡å…¶åœ¨ç”µæ°”è®¾å¤‡çŠ¶æ€æ£€æµ‹ä¸­çš„è¡¨ç°ã€‚é¦–å…ˆï¼Œä¼˜åŒ–æ¨¡å‹ç»“æ„å¯ä»¥é€šè¿‡å¼•å…¥æ›´æ·±å±‚æ¬¡çš„å·ç§¯ç¥ç»ç½‘ç»œå’Œæ³¨æ„åŠ›æœºåˆ¶ï¼Œä½¿å¾—æ¨¡å‹åœ¨ç‰¹å¾æå–æ—¶èƒ½å¤Ÿæ›´åŠ å…³æ³¨å…³é”®åŒºåŸŸï¼Œä»è€Œæé«˜æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚å…¶æ¬¡ï¼Œæ•°æ®é¢„å¤„ç†ç¯èŠ‚çš„æ”¹è¿›ï¼Œå¦‚æ•°æ®å¢å¼ºã€å›¾åƒå»å™ªç­‰ï¼Œå¯ä»¥æå‡æ¨¡å‹çš„é²æ£’æ€§ï¼Œä½¿å…¶åœ¨ä¸åŒç¯å¢ƒæ¡ä»¶ä¸‹ä¾ç„¶èƒ½å¤Ÿä¿æŒè‰¯å¥½çš„æ£€æµ‹æ€§èƒ½ã€‚æ­¤å¤–ï¼Œæ‰©å……æ•°æ®é›†ï¼Œé€šè¿‡æ”¶é›†æ›´å¤šæ ·åŒ–çš„ç”µæ°”è®¾å¤‡å›¾åƒï¼Œèƒ½å¤Ÿè¿›ä¸€æ­¥æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œä½¿å…¶é€‚åº”æ›´å¤šçš„å®é™…åº”ç”¨åœºæ™¯ã€‚

æœ¬ç ”ç©¶çš„æ„ä¹‰ä¸ä»…åœ¨äºæå‡ç”µæ°”è®¾å¤‡çŠ¶æ€æ£€æµ‹çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ï¼Œæ›´åœ¨äºæ¨åŠ¨æ™ºèƒ½ç”µåŠ›ç³»ç»Ÿçš„å»ºè®¾ã€‚é€šè¿‡å®ç°é«˜æ•ˆçš„ç”µæ°”è®¾å¤‡çŠ¶æ€ç›‘æµ‹ï¼Œå¯ä»¥åŠæ—¶å‘ç°æ½œåœ¨æ•…éšœï¼Œå‡å°‘è®¾å¤‡åœæœºæ—¶é—´ï¼Œä»è€Œé™ä½ç»´æŠ¤æˆæœ¬ï¼Œæé«˜ç”µåŠ›ç³»ç»Ÿçš„æ•´ä½“å¯é æ€§ã€‚åŒæ—¶ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ çš„æ£€æµ‹ç³»ç»Ÿè¿˜èƒ½å¤Ÿä¸ºç”µåŠ›è¡Œä¸šçš„æ™ºèƒ½åŒ–è½¬å‹æä¾›æœ‰åŠ›çš„æŠ€æœ¯æ”¯æŒï¼ŒåŠ©åŠ›å®ç°æ›´é«˜æ°´å¹³çš„è‡ªåŠ¨åŒ–ç®¡ç†ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„ç”µæ°”è®¾å¤‡çŠ¶æ€æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ï¼Œä¸ä»…å…·æœ‰é‡è¦çš„ç†è®ºä»·å€¼ï¼Œä¹Ÿå…·å¤‡å¹¿æ³›çš„åº”ç”¨å‰æ™¯ï¼Œå°†ä¸ºç”µåŠ›è¡Œä¸šçš„æ™ºèƒ½åŒ–å‘å±•è´¡çŒ®æ–°çš„æ€è·¯å’Œæ–¹æ³•ã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1QDtwe9Eem/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 10
names: ['A', 'V', 'biao', 'blue', 'connected', 'disconnected', 'green', 'kV', 'red', 'yellow']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨ç°ä»£ç”µæ°”è®¾å¤‡çŠ¶æ€æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ä¸­ï¼Œæ•°æ®é›†çš„é€‰æ‹©ä¸æ„å»ºè‡³å…³é‡è¦ã€‚æœ¬é¡¹ç›®é‡‡ç”¨çš„æ•°æ®é›†åä¸ºâ€œdistribution_roomâ€ï¼Œæ—¨åœ¨ä¸ºæ”¹è¿›YOLOv8æ¨¡å‹æä¾›é«˜è´¨é‡çš„è®­ç»ƒæ•°æ®ï¼Œä»¥æå‡ç”µæ°”è®¾å¤‡çš„çŠ¶æ€æ£€æµ‹èƒ½åŠ›ã€‚è¯¥æ•°æ®é›†åŒ…å«10ä¸ªç±»åˆ«ï¼Œåˆ†åˆ«ä¸ºï¼šAã€Vã€biaoã€blueã€connectedã€disconnectedã€greenã€kVã€redå’Œyellowã€‚è¿™äº›ç±»åˆ«æ¶µç›–äº†ç”µæ°”è®¾å¤‡åœ¨ä¸åŒçŠ¶æ€ä¸‹çš„å¤šæ ·æ€§ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæ”¯æŒæ¨¡å‹çš„å­¦ä¹ ä¸æ¨ç†ã€‚

é¦–å…ˆï¼Œç±»åˆ«â€œAâ€å’Œâ€œVâ€ä»£è¡¨äº†ç”µæ°”è®¾å¤‡çš„åŸºæœ¬çŠ¶æ€æŒ‡æ ‡ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºç”µæµå’Œç”µå‹çš„æµ‹é‡ã€‚è¿™ä¸¤ä¸ªç±»åˆ«çš„æ ·æœ¬æ•°æ®ä¸ä»…åŒ…æ‹¬äº†æ­£å¸¸è¿è¡Œæ—¶çš„çŠ¶æ€ï¼Œè¿˜æ¶µç›–äº†åœ¨ä¸åŒè´Ÿè½½æ¡ä»¶ä¸‹çš„å˜åŒ–ï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿåœ¨å®é™…åº”ç”¨ä¸­å‡†ç¡®è¯†åˆ«å’Œåˆ¤æ–­ç”µæ°”è®¾å¤‡çš„è¿è¡ŒçŠ¶æ€ã€‚æ¥ä¸‹æ¥ï¼Œç±»åˆ«â€œbiaoâ€åˆ™ä¸“æ³¨äºç”µæ°”è®¾å¤‡çš„è¡¨ç›˜è¯»æ•°ï¼Œå¯èƒ½åŒ…æ‹¬å„ç§ä»ªè¡¨çš„æ˜¾ç¤ºçŠ¶æ€ï¼Œè¿™å¯¹äºç›‘æµ‹è®¾å¤‡çš„å®æ—¶è¿è¡ŒçŠ¶æ€è‡³å…³é‡è¦ã€‚

åœ¨é¢œè‰²ç±»åˆ«æ–¹é¢ï¼Œæ•°æ®é›†ä¸­çš„â€œblueâ€ã€â€œgreenâ€ã€â€œredâ€å’Œâ€œyellowâ€ä»£è¡¨äº†ç”µæ°”è®¾å¤‡çš„ä¸åŒæŒ‡ç¤ºç¯çŠ¶æ€ã€‚æ¯ç§é¢œè‰²éƒ½å¯¹åº”ç€ç‰¹å®šçš„è®¾å¤‡çŠ¶æ€ï¼Œä¾‹å¦‚ï¼Œç»¿è‰²é€šå¸¸è¡¨ç¤ºè®¾å¤‡æ­£å¸¸è¿è¡Œï¼Œè€Œçº¢è‰²åˆ™å¯èƒ½è¡¨ç¤ºæ•…éšœæˆ–è­¦æŠ¥çŠ¶æ€ã€‚é€šè¿‡è¿™äº›é¢œè‰²æ ‡è¯†ï¼Œæ¨¡å‹å¯ä»¥å¿«é€Ÿåˆ¤æ–­è®¾å¤‡çš„å¥åº·çŠ¶å†µï¼Œè¿›è€Œé‡‡å–ç›¸åº”çš„æªæ–½ï¼Œç¡®ä¿ç”µåŠ›ç³»ç»Ÿçš„å®‰å…¨ä¸ç¨³å®šã€‚

æ­¤å¤–ï¼Œç±»åˆ«â€œconnectedâ€å’Œâ€œdisconnectedâ€åˆ™æä¾›äº†å…³äºè®¾å¤‡è¿æ¥çŠ¶æ€çš„é‡è¦ä¿¡æ¯ã€‚è¿™ä¸¤ç±»æ ·æœ¬çš„å­˜åœ¨ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿè¯†åˆ«è®¾å¤‡æ˜¯å¦å¤„äºè¿æ¥çŠ¶æ€ï¼Œè¿›è€Œåˆ¤æ–­å…¶æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚è¿™ä¸€ä¿¡æ¯åœ¨å®é™…åº”ç”¨ä¸­æä¸ºé‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦è¿œç¨‹ç›‘æ§å’Œç®¡ç†ç”µæ°”è®¾å¤‡çš„åœºæ™¯ä¸­ã€‚

æœ€åï¼Œç±»åˆ«â€œkVâ€åˆ™æ¶‰åŠåˆ°ç”µæ°”è®¾å¤‡çš„ç”µå‹ç­‰çº§ï¼Œé€šå¸¸ç”¨äºé«˜å‹ç”µæ°”è®¾å¤‡çš„çŠ¶æ€ç›‘æµ‹ã€‚è¯¥ç±»åˆ«çš„æ ·æœ¬æ•°æ®å°†å¸®åŠ©æ¨¡å‹ç†è§£å’Œå¤„ç†ä¸åŒç”µå‹ç­‰çº§ä¸‹è®¾å¤‡çš„è¿è¡Œç‰¹æ€§ï¼Œä»è€Œæé«˜å…¶åœ¨å¤æ‚ç”µåŠ›ç¯å¢ƒä¸­çš„é€‚åº”èƒ½åŠ›ã€‚

æ€»çš„æ¥è¯´ï¼Œâ€œdistribution_roomâ€æ•°æ®é›†é€šè¿‡ä¸°å¯Œçš„ç±»åˆ«è®¾ç½®å’Œå¤šæ ·çš„æ ·æœ¬æ•°æ®ï¼Œä¸ºæ”¹è¿›YOLOv8æ¨¡å‹æä¾›äº†åšå®çš„åŸºç¡€ã€‚è¯¥æ•°æ®é›†ä¸ä»…æ¶µç›–äº†ç”µæ°”è®¾å¤‡çš„å¤šç§çŠ¶æ€ï¼Œè¿˜é€šè¿‡é¢œè‰²ã€è¿æ¥çŠ¶æ€å’Œç”µå‹ç­‰çº§ç­‰å¤šç»´åº¦ä¿¡æ¯ï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿåœ¨å¤æ‚çš„ç”µæ°”ç¯å¢ƒä¸­è¿›è¡Œå‡†ç¡®çš„çŠ¶æ€æ£€æµ‹ã€‚é€šè¿‡å¯¹è¯¥æ•°æ®é›†çš„æ·±å…¥å­¦ä¹ ä¸è®­ç»ƒï¼Œé¢„è®¡å°†æ˜¾è‘—æå‡ç”µæ°”è®¾å¤‡çŠ¶æ€æ£€æµ‹ç³»ç»Ÿçš„æ€§èƒ½ï¼Œä¸ºç”µåŠ›è¡Œä¸šçš„æ™ºèƒ½åŒ–ç®¡ç†æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8æ˜¯Ultralyticså…¬å¸åœ¨2023å¹´æ¨å‡ºçš„ç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œä½œä¸ºYOLOç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå®ƒåœ¨å‰å‡ ä»£çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ˜¾è‘—çš„æ”¹è¿›å’Œåˆ›æ–°ã€‚YOLOv8çš„è®¾è®¡ç†å¿µå¼ºè°ƒäº†å¿«é€Ÿã€å‡†ç¡®å’Œæ˜“äºä½¿ç”¨ï¼Œä½¿å…¶åœ¨ç›®æ ‡æ£€æµ‹ã€å›¾åƒåˆ†å‰²å’Œå›¾åƒåˆ†ç±»ç­‰å¤šç§ä»»åŠ¡ä¸­è¡¨ç°å‡ºè‰²ã€‚å…¶ç½‘ç»œç»“æ„ä¸»è¦ç”±è¾“å…¥ç«¯ã€ä¸»å¹²ç½‘ç»œã€Neckéƒ¨åˆ†å’Œè¾“å‡ºç«¯å››ä¸ªæ¨¡å—ç»„æˆï¼Œæ¯ä¸ªæ¨¡å—çš„è®¾è®¡éƒ½æ—¨åœ¨æå‡æ¨¡å‹çš„æ€§èƒ½å’Œçµæ´»æ€§ã€‚

åœ¨è¾“å…¥ç«¯ï¼ŒYOLOv8é‡‡ç”¨äº†640x640çš„é»˜è®¤å›¾åƒå°ºå¯¸ï¼Œç„¶è€Œï¼Œè€ƒè™‘åˆ°å®é™…åº”ç”¨ä¸­å›¾åƒé•¿å®½æ¯”çš„å¤šæ ·æ€§ï¼ŒYOLOv8å¼•å…¥äº†è‡ªé€‚åº”å›¾ç‰‡ç¼©æ”¾æŠ€æœ¯ã€‚è¿™ä¸€æŠ€æœ¯çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†å›¾åƒçš„é•¿è¾¹æŒ‰æ¯”ä¾‹ç¼©å°åˆ°æŒ‡å®šå°ºå¯¸ï¼Œç„¶åå¯¹çŸ­è¾¹è¿›è¡Œå¡«å……ï¼Œä»è€Œå‡å°‘ä¿¡æ¯å†—ä½™ï¼Œæé«˜ç›®æ ‡æ£€æµ‹å’Œæ¨ç†çš„é€Ÿåº¦ã€‚æ­¤å¤–ï¼ŒYOLOv8åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä½¿ç”¨äº†Mosaicå›¾åƒå¢å¼ºæŠ€æœ¯ï¼Œé€šè¿‡éšæœºé€‰æ‹©å››å¼ å›¾åƒè¿›è¡Œç¼©æ”¾å’Œæ‹¼æ¥ï¼Œç”Ÿæˆæ–°çš„è®­ç»ƒæ ·æœ¬ã€‚è¿™ç§æ–¹æ³•ä¸ä»…å¢åŠ äº†è®­ç»ƒæ ·æœ¬çš„å¤šæ ·æ€§ï¼Œè¿˜è¿«ä½¿æ¨¡å‹å­¦ä¹ ä¸åŒä½ç½®å’Œå‘¨å›´åƒç´ çš„ç‰¹å¾ï¼Œä»è€Œæœ‰æ•ˆæå‡äº†é¢„æµ‹ç²¾åº¦ã€‚

åœ¨ä¸»å¹²ç½‘ç»œéƒ¨åˆ†ï¼ŒYOLOv8å€Ÿé‰´äº†YOLOv7ä¸­çš„ELANæ¨¡å—ï¼Œæ›¿æ¢äº†YOLOv5ä¸­çš„C3æ¨¡å—ä¸ºC2Fæ¨¡å—ã€‚C2Fæ¨¡å—é€šè¿‡å¹¶è¡Œæ›´å¤šçš„æ¢¯åº¦æµåˆ†æ”¯ï¼Œä¿è¯äº†è½»é‡åŒ–çš„åŒæ—¶è·å¾—äº†æ›´ä¸°å¯Œçš„æ¢¯åº¦æµä¿¡æ¯ï¼Œä»è€Œæå‡äº†æ¨¡å‹çš„ç²¾åº¦å’Œåˆç†çš„å»¶è¿Ÿã€‚YOLOv8çš„ä¸»å¹²ç½‘ç»œç»“æ„è®¾è®¡æ—¨åœ¨é«˜æ•ˆæå–å›¾åƒç‰¹å¾ï¼Œä½¿å¾—åç»­çš„ç›®æ ‡æ£€æµ‹å’Œåˆ†ç±»ä»»åŠ¡èƒ½å¤Ÿåœ¨æ›´é«˜çš„ç²¾åº¦ä¸‹è¿›è¡Œã€‚

Neckéƒ¨åˆ†æ˜¯YOLOv8çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå…¶è®¾è®¡åŸºäºè·¯å¾„èšåˆç½‘ç»œï¼ˆPANï¼‰ç»“æ„ï¼Œä¼˜åŒ–äº†ç‰¹å¾èåˆçš„è¿‡ç¨‹ã€‚YOLOv8åœ¨Neckéƒ¨åˆ†ä¸ä»…å°†C3æ¨¡å—æ›¿æ¢ä¸ºC2Fæ¨¡å—ï¼Œè¿˜å»é™¤äº†ä¸¤æ¬¡ä¸Šé‡‡æ ·ä¹‹å‰çš„1x1å·ç§¯è¿æ¥å±‚ï¼Œç›´æ¥å¯¹ä¸åŒé˜¶æ®µè¾“å‡ºçš„ç‰¹å¾è¿›è¡Œä¸Šé‡‡æ ·ã€‚è¿™ä¸€æ”¹è¿›å‡å°‘äº†è®¡ç®—å¤æ‚åº¦ï¼ŒåŒæ—¶ä¿ç•™äº†æ›´å¤šçš„ç‰¹å¾ä¿¡æ¯ï¼Œä½¿å¾—ç½‘ç»œåœ¨å¤„ç†ä¸åŒå°ºåº¦çš„ç›®æ ‡æ—¶è¡¨ç°æ›´åŠ å‡ºè‰²ã€‚

YOLOv8çš„è¾“å‡ºç«¯é‡‡ç”¨äº†å…¨æ–°çš„è§£è€¦å¤´ï¼ˆDecoupled-Headï¼‰ç»“æ„ï¼Œä¸YOLOv5çš„è€¦åˆå¤´ï¼ˆCoupled-Headï¼‰ç›¸æ¯”ï¼Œè§£è€¦å¤´å°†æ£€æµ‹å’Œåˆ†ç±»çš„å·ç§¯åˆ†å¼€å¤„ç†ã€‚è¾“å…¥ç‰¹å¾å›¾é¦–å…ˆé€šè¿‡ä¸¤ä¸ª1x1çš„å·ç§¯æ¨¡å—è¿›è¡Œé™ç»´ï¼Œç„¶ååˆ†åˆ«ç”¨äºç±»åˆ«é¢„æµ‹å’Œè¾¹ç•Œæ¡†ä½ç½®åŠIoUï¼ˆäº¤å¹¶æ¯”ï¼‰é¢„æµ‹ã€‚è¿™ç§è®¾è®¡ä¸ä»…æé«˜äº†æ¨¡å‹çš„çµæ´»æ€§ï¼Œè¿˜ä½¿å¾—æŸå¤±å‡½æ•°çš„è®¾è®¡æ›´åŠ åˆç†ã€‚YOLOv8ä¸­å–æ¶ˆäº†Objåˆ†æ”¯ï¼Œåˆ†ç±»åˆ†æ”¯ä¾ç„¶é‡‡ç”¨äºŒå€¼äº¤å‰ç†µæŸå¤±ï¼ˆBCELossï¼‰ï¼Œè€Œè¾¹ç•Œæ¡†å›å½’åˆ†æ”¯åˆ™ä½¿ç”¨äº†åˆ†å¸ƒç„¦ç‚¹æŸå¤±ï¼ˆDFLï¼‰å’ŒCIoUæŸå¤±ã€‚è¿™ä¸€æ”¹è¿›æ—¨åœ¨ä½¿ç½‘ç»œæ¨¡å‹èƒ½å¤Ÿå¿«é€Ÿèšç„¦äºæ ‡ç­¾é™„è¿‘çš„æ•°å€¼ï¼Œæé«˜äº†ç›®æ ‡æ£€æµ‹çš„ç²¾åº¦ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒYOLOv8æ‘’å¼ƒäº†ä¼ ç»Ÿçš„åŸºäºé”šæ¡†ï¼ˆAnchor-Basedï¼‰çš„æ–¹æ³•ï¼Œè½¬è€Œé‡‡ç”¨æ— é”šæ¡†ï¼ˆAnchor-Freeï¼‰çš„æ–¹æ³•ã€‚è¿™ä¸€è½¬å˜ä½¿å¾—ç›®æ ‡æ£€æµ‹è¿‡ç¨‹æ›´åŠ çµæ´»ï¼Œç½‘ç»œæ¡†æ¶æ›´åŠ ç®€æ´ã€‚ä¼ ç»Ÿçš„é”šæ¡†æ–¹æ³•éœ€è¦é¢„è®¾ç›®æ ‡å¯èƒ½å­˜åœ¨çš„æ¡†ï¼Œå¹¶è¿›è¡Œå¤§é‡çš„IoUè®¡ç®—ï¼Œå¢åŠ äº†è¿ç®—å¤æ‚åº¦ã€‚è€ŒYOLOv8é€šè¿‡å°†ç›®æ ‡æ£€æµ‹è½¬åŒ–ä¸ºå…³é”®ç‚¹æ£€æµ‹ï¼Œé¿å…äº†è¿™äº›ç¹ççš„æ­¥éª¤ï¼Œä»è€Œæå‡äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å’Œæ£€æµ‹ç²¾åº¦ã€‚

YOLOv8çš„è®¾è®¡ä¸ä»…å…³æ³¨ç®—æ³•çš„å‡†ç¡®æ€§å’Œé€Ÿåº¦ï¼Œè¿˜è€ƒè™‘äº†æ¨¡å‹çš„æ˜“ç”¨æ€§å’Œé€‚åº”æ€§ã€‚é€šè¿‡å¼•å…¥è‡ªé€‚åº”ç¼©æ”¾ã€Mosaicå¢å¼ºã€C2Fæ¨¡å—å’Œè§£è€¦å¤´ç­‰åˆ›æ–°ï¼ŒYOLOv8åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šè¡¨ç°å‡ºè‰²ï¼Œå°¤å…¶æ˜¯åœ¨COCOval2017æ•°æ®é›†ä¸Šï¼Œå•æ¨¡å‹å•å°ºåº¦æµ‹è¯•ç»“æœæ˜¾ç¤ºäº†å…¶ä¼˜è¶Šçš„æ€§èƒ½ã€‚å°½ç®¡åœ¨å¤æ‚ç¯å¢ƒä¸‹ä»ç„¶å­˜åœ¨ä¸€äº›æŒ‘æˆ˜ï¼Œå¦‚å°ç›®æ ‡çš„æ£€æµ‹èƒ½åŠ›ä¸è¶³ï¼ŒYOLOv8çš„è®¾è®¡ç†å¿µå’Œç»“æ„ä¼˜åŒ–ä¸ºåç»­çš„ç ”ç©¶å’Œåº”ç”¨æä¾›äº†åšå®çš„åŸºç¡€ã€‚

æ€»ä¹‹ï¼ŒYOLOv8ä½œä¸ºYOLOç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œé€šè¿‡ä¸€ç³»åˆ—åˆ›æ–°çš„è®¾è®¡å’Œä¼˜åŒ–ï¼Œæ˜¾è‘—æå‡äº†ç›®æ ‡æ£€æµ‹çš„æ€§èƒ½å’Œçµæ´»æ€§ã€‚å…¶è‡ªé€‚åº”çš„è¾“å…¥å¤„ç†ã€å…ˆè¿›çš„ä¸»å¹²ç½‘ç»œç»“æ„ã€ä¼˜åŒ–çš„ç‰¹å¾èåˆæœºåˆ¶ä»¥åŠè§£è€¦çš„è¾“å‡ºè®¾è®¡ï¼Œä½¿å¾—YOLOv8åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸä¸­å æ®äº†é‡è¦çš„ä½ç½®ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼ŒYOLOv8æ— ç–‘å°†åœ¨æœªæ¥çš„åº”ç”¨ä¸­å‘æŒ¥æ›´å¤§çš„ä½œç”¨ï¼Œæ¨åŠ¨ç›®æ ‡æ£€æµ‹æŠ€æœ¯çš„å‘å±•ã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 ui.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç²¾ç®€å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import sys
import subprocess
from QtFusion.path import abs_path

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ streamlit è¿è¡ŒæŒ‡å®šçš„è„šæœ¬
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤å¹¶æ•è·ç»“æœ
    result = subprocess.run(command, shell=True)
    
    # æ£€æŸ¥è„šæœ¬æ‰§è¡Œæ˜¯å¦æˆåŠŸ
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")

# ä¸»ç¨‹åºå…¥å£
if __name__ == "__main__":
    # è·å–è¦è¿è¡Œçš„è„šæœ¬çš„ç»å¯¹è·¯å¾„
    script_path = abs_path("web.py")

    # è°ƒç”¨å‡½æ•°è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç è¯´æ˜ï¼š
1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `sys`ï¼šç”¨äºè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
   - `subprocess`ï¼šç”¨äºæ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚
   - `abs_path`ï¼šä» `QtFusion.path` æ¨¡å—å¯¼å…¥ï¼Œç”¨äºè·å–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚

2. **`run_script` å‡½æ•°**ï¼š
   - è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªè„šæœ¬è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œå¹¶ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡Œè¯¥è„šæœ¬ã€‚
   - é¦–å…ˆï¼Œé€šè¿‡ `sys.executable` è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
   - ç„¶åï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `streamlit` è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚
   - ä½¿ç”¨ `subprocess.run` æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶æ£€æŸ¥è¿”å›ç ä»¥åˆ¤æ–­è„šæœ¬æ˜¯å¦æˆåŠŸè¿è¡Œã€‚

3. **ä¸»ç¨‹åºå…¥å£**ï¼š
   - åœ¨ `if __name__ == "__main__":` å—ä¸­ï¼Œè·å–è¦è¿è¡Œçš„è„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼ˆ`web.py`ï¼‰ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°æ‰§è¡Œè¯¥è„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `ui.py` çš„ä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ï¼Œå…·ä½“æ˜¯ä½¿ç”¨ Streamlit æ¡†æ¶æ¥å¯åŠ¨ä¸€ä¸ª Web åº”ç”¨ã€‚é¦–å…ˆï¼Œæ–‡ä»¶ä¸­å¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ï¼Œä»¥åŠä¸€ä¸ªè‡ªå®šä¹‰çš„ `abs_path` å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯èƒ½ç”¨äºè·å–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Python ç¯å¢ƒæ¥è¿è¡Œè„šæœ¬ã€‚æ¥ç€ï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå‘½ä»¤ä½¿ç”¨ `streamlit run` æ¥å¯åŠ¨æŒ‡å®šçš„è„šæœ¬ã€‚è¿™é‡Œçš„ `script_path` å‚æ•°æ˜¯è¦è¿è¡Œçš„è„šæœ¬çš„è·¯å¾„ï¼Œæ ¼å¼åŒ–åå½¢æˆå®Œæ•´çš„å‘½ä»¤ã€‚

ç„¶åï¼Œä½¿ç”¨ `subprocess.run` æ–¹æ³•æ¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨æ–°çš„ shell ä¸­è¿è¡Œå‘½ä»¤ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆã€‚å¦‚æœå‘½ä»¤æ‰§è¡Œåè¿”å›çš„çŠ¶æ€ç ä¸ä¸ºé›¶ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œç¨‹åºä¼šæ‰“å°å‡ºé”™è¯¯ä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œä½¿ç”¨ `if __name__ == "__main__":` æ¥ç¡®ä¿å½“è¯¥æ–‡ä»¶ä½œä¸ºä¸»ç¨‹åºè¿è¡Œæ—¶ï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç ã€‚è¿™é‡ŒæŒ‡å®šäº†è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ä¸º `web.py`ï¼Œå¹¶è°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åŠŸèƒ½æ˜¯å°è£…äº†ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºå¯åŠ¨ä¸€ä¸ª Streamlit Web åº”ç”¨ï¼Œæ–¹ä¾¿ç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­è¿è¡ŒæŒ‡å®šçš„ Python è„šæœ¬ã€‚

#### 11.2 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\instance.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼Œä¸»è¦åŒ…æ‹¬ `Bboxes` å’Œ `Instances` ç±»çš„å®ç°ã€‚è¿™äº›ç±»ç”¨äºå¤„ç†è¾¹ç•Œæ¡†ï¼ˆbounding boxesï¼‰åŠå…¶ç›¸å…³æ“ä½œã€‚

```python
import numpy as np

class Bboxes:
    """
    å¤„ç†è¾¹ç•Œæ¡†çš„ç±»ï¼Œæ”¯æŒå¤šç§æ ¼å¼ï¼ˆ'xyxy', 'xywh', 'ltwh'ï¼‰ã€‚
    """

    def __init__(self, bboxes, format='xyxy') -> None:
        """åˆå§‹åŒ– Bboxes ç±»ï¼Œæ¥å—è¾¹ç•Œæ¡†æ•°æ®å’Œæ ¼å¼ã€‚"""
        # ç¡®ä¿æ ¼å¼æœ‰æ•ˆ
        assert format in ['xyxy', 'xywh', 'ltwh'], f'æ— æ•ˆçš„è¾¹ç•Œæ¡†æ ¼å¼: {format}'
        # å°†ä¸€ç»´æ•°ç»„è½¬æ¢ä¸ºäºŒç»´æ•°ç»„
        bboxes = bboxes[None, :] if bboxes.ndim == 1 else bboxes
        assert bboxes.ndim == 2 and bboxes.shape[1] == 4, "è¾¹ç•Œæ¡†å¿…é¡»æ˜¯äºŒç»´æ•°ç»„ï¼Œä¸”æ¯ä¸ªæ¡†åŒ…å«4ä¸ªå€¼"
        self.bboxes = bboxes  # å­˜å‚¨è¾¹ç•Œæ¡†
        self.format = format  # å­˜å‚¨æ ¼å¼

    def convert(self, format):
        """å°†è¾¹ç•Œæ¡†æ ¼å¼è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼ã€‚"""
        assert format in ['xyxy', 'xywh', 'ltwh'], f'æ— æ•ˆçš„è¾¹ç•Œæ¡†æ ¼å¼: {format}'
        if self.format == format:
            return  # å¦‚æœæ ¼å¼ç›¸åŒï¼Œä¸éœ€è¦è½¬æ¢
        # æ ¹æ®å½“å‰æ ¼å¼å’Œç›®æ ‡æ ¼å¼é€‰æ‹©è½¬æ¢å‡½æ•°
        if self.format == 'xyxy':
            func = xyxy2xywh if format == 'xywh' else xyxy2ltwh
        elif self.format == 'xywh':
            func = xywh2xyxy if format == 'xyxy' else xywh2ltwh
        else:
            func = ltwh2xyxy if format == 'xyxy' else ltwh2xywh
        self.bboxes = func(self.bboxes)  # æ‰§è¡Œè½¬æ¢
        self.format = format  # æ›´æ–°æ ¼å¼

    def areas(self):
        """è®¡ç®—å¹¶è¿”å›æ¯ä¸ªè¾¹ç•Œæ¡†çš„é¢ç§¯ã€‚"""
        self.convert('xyxy')  # è½¬æ¢ä¸º 'xyxy' æ ¼å¼ä»¥è®¡ç®—é¢ç§¯
        return (self.bboxes[:, 2] - self.bboxes[:, 0]) * (self.bboxes[:, 3] - self.bboxes[:, 1])  # è®¡ç®—é¢ç§¯

    def __len__(self):
        """è¿”å›è¾¹ç•Œæ¡†çš„æ•°é‡ã€‚"""
        return len(self.bboxes)

class Instances:
    """
    å­˜å‚¨å›¾åƒä¸­æ£€æµ‹åˆ°çš„å¯¹è±¡çš„è¾¹ç•Œæ¡†ã€åˆ†æ®µå’Œå…³é”®ç‚¹çš„å®¹å™¨ã€‚
    """

    def __init__(self, bboxes, segments=None, keypoints=None, bbox_format='xywh', normalized=True) -> None:
        """åˆå§‹åŒ– Instances ç±»ï¼Œæ¥å—è¾¹ç•Œæ¡†ã€åˆ†æ®µå’Œå…³é”®ç‚¹æ•°æ®ã€‚"""
        self._bboxes = Bboxes(bboxes=bboxes, format=bbox_format)  # åˆ›å»º Bboxes å¯¹è±¡
        self.keypoints = keypoints  # å­˜å‚¨å…³é”®ç‚¹
        self.normalized = normalized  # æ ‡è®°æ˜¯å¦å½’ä¸€åŒ–

        # å¤„ç†åˆ†æ®µæ•°æ®
        if segments is None:
            segments = []
        if len(segments) > 0:
            segments = resample_segments(segments)  # é‡æ–°é‡‡æ ·åˆ†æ®µ
            segments = np.stack(segments, axis=0)  # è½¬æ¢ä¸ºæ•°ç»„
        else:
            segments = np.zeros((0, 1000, 2), dtype=np.float32)  # åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„
        self.segments = segments  # å­˜å‚¨åˆ†æ®µæ•°æ®

    def convert_bbox(self, format):
        """è½¬æ¢è¾¹ç•Œæ¡†æ ¼å¼ã€‚"""
        self._bboxes.convert(format=format)

    @property
    def bbox_areas(self):
        """è®¡ç®—è¾¹ç•Œæ¡†çš„é¢ç§¯ã€‚"""
        return self._bboxes.areas()

    def __getitem__(self, index) -> 'Instances':
        """
        ä½¿ç”¨ç´¢å¼•è·å–ç‰¹å®šå®ä¾‹æˆ–å®ä¾‹é›†ã€‚
        """
        segments = self.segments[index] if len(self.segments) else self.segments
        keypoints = self.keypoints[index] if self.keypoints is not None else None
        bboxes = self.bboxes[index]
        bbox_format = self._bboxes.format
        return Instances(
            bboxes=bboxes,
            segments=segments,
            keypoints=keypoints,
            bbox_format=bbox_format,
            normalized=self.normalized,
        )

    def __len__(self):
        """è¿”å›å®ä¾‹åˆ—è¡¨çš„é•¿åº¦ã€‚"""
        return len(self.bboxes)

    @property
    def bboxes(self):
        """è¿”å›è¾¹ç•Œæ¡†ã€‚"""
        return self._bboxes.bboxes
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **Bboxes ç±»**ï¼šç”¨äºå¤„ç†è¾¹ç•Œæ¡†ï¼Œæ”¯æŒä¸åŒçš„æ ¼å¼ï¼ˆ`xyxy`, `xywh`, `ltwh`ï¼‰ã€‚æä¾›äº†åˆå§‹åŒ–ã€æ ¼å¼è½¬æ¢ã€é¢ç§¯è®¡ç®—ç­‰åŠŸèƒ½ã€‚
2. **Instances ç±»**ï¼šç”¨äºå­˜å‚¨å›¾åƒä¸­æ£€æµ‹åˆ°çš„å¯¹è±¡çš„è¾¹ç•Œæ¡†ã€åˆ†æ®µå’Œå…³é”®ç‚¹ã€‚æ”¯æŒåˆå§‹åŒ–ã€æ ¼å¼è½¬æ¢ã€ç´¢å¼•è®¿é—®ç­‰åŠŸèƒ½ã€‚
3. **å±æ€§å’Œæ–¹æ³•**ï¼šæ¯ä¸ªç±»éƒ½å®šä¹‰äº†å¤šä¸ªæ–¹æ³•å’Œå±æ€§ï¼Œä»¥ä¾¿äºæ“ä½œå’Œè·å–ç›¸å…³æ•°æ®ã€‚

é€šè¿‡è¿™äº›æ³¨é‡Šï¼Œä»£ç çš„åŠŸèƒ½å’Œç»“æ„å˜å¾—æ›´åŠ æ¸…æ™°ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†è¾¹ç•Œæ¡†ï¼ˆbounding boxesï¼‰çš„å·¥å…·ç±»ï¼Œä¸»è¦ç”¨äºè®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸­çš„ç›®æ ‡æ£€æµ‹ã€‚å®ƒå®šä¹‰äº†ä¸¤ä¸ªä¸»è¦çš„ç±»ï¼š`Bboxes`å’Œ`Instances`ï¼Œåˆ†åˆ«ç”¨äºå¤„ç†è¾¹ç•Œæ¡†å’ŒåŒ…å«è¾¹ç•Œæ¡†ã€åˆ†å‰²å’Œå…³é”®ç‚¹çš„å®ä¾‹ã€‚

é¦–å…ˆï¼Œ`Bboxes`ç±»ç”¨äºç®¡ç†å’Œè½¬æ¢è¾¹ç•Œæ¡†æ•°æ®ã€‚å®ƒæ”¯æŒä¸‰ç§è¾¹ç•Œæ¡†æ ¼å¼ï¼š`xyxy`ï¼ˆå·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡ï¼‰ã€`xywh`ï¼ˆä¸­å¿ƒåæ ‡å’Œå®½é«˜ï¼‰ä»¥åŠ`ltwh`ï¼ˆå·¦ä¸Šè§’åæ ‡å’Œå®½é«˜ï¼‰ã€‚åœ¨åˆå§‹åŒ–æ—¶ï¼Œ`Bboxes`ç±»ä¼šæ£€æŸ¥è¾“å…¥çš„æ ¼å¼æ˜¯å¦æœ‰æ•ˆï¼Œå¹¶ç¡®ä¿è¾“å…¥çš„è¾¹ç•Œæ¡†æ•°æ®æ˜¯ä¸€ä¸ªäºŒç»´çš„NumPyæ•°ç»„ã€‚ç±»ä¸­åŒ…å«å¤šä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚`convert`ç”¨äºåœ¨ä¸åŒæ ¼å¼ä¹‹é—´è½¬æ¢è¾¹ç•Œæ¡†ï¼Œ`areas`ç”¨äºè®¡ç®—è¾¹ç•Œæ¡†çš„é¢ç§¯ï¼Œ`mul`å’Œ`add`ç”¨äºå¯¹è¾¹ç•Œæ¡†è¿›è¡Œç¼©æ”¾å’Œåç§»æ“ä½œã€‚æ­¤å¤–ï¼Œ`Bboxes`ç±»è¿˜æ”¯æŒç´¢å¼•æ“ä½œï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•è·å–ç‰¹å®šçš„è¾¹ç•Œæ¡†ã€‚

æ¥ä¸‹æ¥ï¼Œ`Instances`ç±»æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„å®¹å™¨ï¼Œé™¤äº†åŒ…å«è¾¹ç•Œæ¡†å¤–ï¼Œè¿˜å¯ä»¥å­˜å‚¨åˆ†å‰²å’Œå…³é”®ç‚¹ä¿¡æ¯ã€‚å®ƒåœ¨åˆå§‹åŒ–æ—¶ä¼šåˆ›å»ºä¸€ä¸ª`Bboxes`å¯¹è±¡æ¥å¤„ç†è¾¹ç•Œæ¡†ï¼Œå¹¶å¯¹åˆ†å‰²å’Œå…³é”®ç‚¹è¿›è¡Œå¤„ç†ã€‚`Instances`ç±»æä¾›äº†å¤šç§æ–¹æ³•ï¼Œä¾‹å¦‚`convert_bbox`ç”¨äºè½¬æ¢è¾¹ç•Œæ¡†æ ¼å¼ï¼Œ`scale`å’Œ`normalize`ç”¨äºç¼©æ”¾å’Œå½’ä¸€åŒ–è¾¹ç•Œæ¡†ã€åˆ†å‰²å’Œå…³é”®ç‚¹çš„åæ ‡ï¼Œ`clip`ç”¨äºå°†è¾¹ç•Œæ¡†å’Œåˆ†å‰²é™åˆ¶åœ¨å›¾åƒè¾¹ç•Œå†…ã€‚æ­¤å¤–ï¼Œ`Instances`ç±»è¿˜æ”¯æŒé€šè¿‡ç´¢å¼•è·å–ç‰¹å®šå®ä¾‹ï¼Œå¹¶æä¾›äº†ç¿»è½¬å’Œå»é™¤é›¶é¢ç§¯æ¡†çš„åŠŸèƒ½ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€å¥—å®Œæ•´çš„å·¥å…·ï¼Œç”¨äºå¤„ç†å’Œæ“ä½œè¾¹ç•Œæ¡†ã€åˆ†å‰²å’Œå…³é”®ç‚¹æ•°æ®ï¼Œé€‚ç”¨äºç›®æ ‡æ£€æµ‹ç­‰è®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚é€šè¿‡è¿™äº›ç±»ï¼Œç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œè¾¹ç•Œæ¡†çš„æ ¼å¼è½¬æ¢ã€åæ ‡ç¼©æ”¾ã€æ•°æ®æ‹¼æ¥ç­‰æ“ä½œï¼Œæå¤§åœ°ç®€åŒ–äº†ç›¸å…³çš„ç¼–ç¨‹å·¥ä½œã€‚

#### 11.3 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\hub\session.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å¹¶æ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import signal
import sys
from time import sleep
import requests
from ultralytics.hub.utils import HUB_API_ROOT, HUB_WEB_ROOT, smart_request
from ultralytics.utils import LOGGER, checks
from ultralytics.utils.errors import HUBModelError

AGENT_NAME = 'python-agent'  # ä»£ç†åç§°

class HUBTrainingSession:
    """
    HUBè®­ç»ƒä¼šè¯ç±»ï¼Œç”¨äºç®¡ç†Ultralytics HUB YOLOæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ã€‚
    """

    def __init__(self, url):
        """
        åˆå§‹åŒ–HUBTrainingSessionï¼Œè®¾ç½®æ¨¡å‹æ ‡è¯†ç¬¦ã€‚

        Args:
            url (str): æ¨¡å‹æ ‡è¯†ç¬¦ï¼Œå¯ä»¥æ˜¯URLå­—ç¬¦ä¸²æˆ–ç‰¹å®šæ ¼å¼çš„æ¨¡å‹é”®ã€‚
        """
        # è§£æè¾“å…¥çš„æ¨¡å‹URL
        if url.startswith(f'{HUB_WEB_ROOT}/models/'):
            url = url.split(f'{HUB_WEB_ROOT}/models/')[-1]
        if [len(x) for x in url.split('_')] == [42, 20]:
            key, model_id = url.split('_')
        elif len(url) == 20:
            key, model_id = '', url
        else:
            raise HUBModelError(f"æ¨¡å‹='{url}'æœªæ‰¾åˆ°ï¼Œè¯·æ£€æŸ¥æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚")

        # è¿›è¡Œèº«ä»½éªŒè¯
        self.agent_id = None  # æ ‡è¯†ä¸æœåŠ¡å™¨é€šä¿¡çš„å®ä¾‹
        self.model_id = model_id
        self.model_url = f'{HUB_WEB_ROOT}/models/{model_id}'
        self.api_url = f'{HUB_API_ROOT}/v1/models/{model_id}'
        self.auth_header = {'Authorization': f'Bearer {key}'}  # è®¤è¯å¤´
        self.alive = True  # å¿ƒè·³çŠ¶æ€
        self._start_heartbeat()  # å¯åŠ¨å¿ƒè·³
        self._register_signal_handlers()  # æ³¨å†Œä¿¡å·å¤„ç†å™¨
        LOGGER.info(f'æŸ¥çœ‹æ¨¡å‹: {self.model_url} ğŸš€')

    def _register_signal_handlers(self):
        """æ³¨å†Œä¿¡å·å¤„ç†å™¨ä»¥ä¼˜é›…åœ°å¤„ç†ç»ˆæ­¢ä¿¡å·ã€‚"""
        signal.signal(signal.SIGTERM, self._handle_signal)
        signal.signal(signal.SIGINT, self._handle_signal)

    def _handle_signal(self, signum, frame):
        """å¤„ç†ç»ˆæ­¢ä¿¡å·ï¼Œåœæ­¢å¿ƒè·³å¹¶é€€å‡ºç¨‹åºã€‚"""
        if self.alive:
            LOGGER.info('æ”¶åˆ°ç»ˆæ­¢ä¿¡å·ï¼âŒ')
            self._stop_heartbeat()
            sys.exit(signum)

    def _stop_heartbeat(self):
        """ç»ˆæ­¢å¿ƒè·³å¾ªç¯ã€‚"""
        self.alive = False

    def upload_metrics(self):
        """ä¸Šä¼ æ¨¡å‹æŒ‡æ ‡åˆ°Ultralytics HUBã€‚"""
        payload = {'metrics': {}, 'type': 'metrics'}  # è¿™é‡Œçš„metrics_queueè¢«ç®€åŒ–ä¸ºä¸€ä¸ªç©ºå­—å…¸
        smart_request('post', self.api_url, json=payload, headers=self.auth_header)

    def _get_model(self):
        """ä»Ultralytics HUBè·å–æ¨¡å‹æ•°æ®ã€‚"""
        api_url = f'{HUB_API_ROOT}/v1/models/{self.model_id}'
        response = smart_request('get', api_url, headers=self.auth_header)
        data = response.json().get('data', None)
        return data  # è¿”å›æ¨¡å‹æ•°æ®

    def upload_model(self, epoch, weights, is_best=False, final=False):
        """
        ä¸Šä¼ æ¨¡å‹æ£€æŸ¥ç‚¹åˆ°Ultralytics HUBã€‚

        Args:
            epoch (int): å½“å‰è®­ç»ƒçš„epochã€‚
            weights (str): æ¨¡å‹æƒé‡æ–‡ä»¶çš„è·¯å¾„ã€‚
            is_best (bool): å½“å‰æ¨¡å‹æ˜¯å¦æ˜¯æœ€å¥½çš„æ¨¡å‹ã€‚
            final (bool): å½“å‰æ¨¡å‹æ˜¯å¦æ˜¯æœ€ç»ˆæ¨¡å‹ã€‚
        """
        if Path(weights).is_file():
            with open(weights, 'rb') as f:
                file = f.read()
        else:
            LOGGER.warning(f'æ¨¡å‹ä¸Šä¼ é—®é¢˜ï¼Œç¼ºå°‘æ¨¡å‹ {weights}.')
            file = None

        url = f'{self.api_url}/upload'
        data = {'epoch': epoch}
        if final:
            data.update({'type': 'final'})
            smart_request('post', url, data=data, files={'final_model.pt': file}, headers=self.auth_header)
        else:
            data.update({'type': 'epoch', 'isBest': is_best})
            smart_request('post', url, data=data, files={'last_model.pt': file}, headers=self.auth_header)

    def _start_heartbeat(self):
        """å¼€å§‹å¿ƒè·³å¾ªç¯ï¼Œå®šæœŸæŠ¥å‘Šä»£ç†çŠ¶æ€åˆ°Ultralytics HUBã€‚"""
        while self.alive:
            smart_request('post', f'{HUB_API_ROOT}/v1/agent/heartbeat/models/{self.model_id}',
                          json={'agent': AGENT_NAME, 'agentId': self.agent_id},
                          headers=self.auth_header)
            sleep(300)  # æ¯300ç§’å‘é€ä¸€æ¬¡å¿ƒè·³
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **HUBTrainingSessionç±»**ï¼šè¯¥ç±»ç”¨äºç®¡ç†ä¸Ultralytics HUBçš„è®­ç»ƒä¼šè¯ï¼ŒåŒ…æ‹¬æ¨¡å‹çš„åˆå§‹åŒ–ã€å¿ƒè·³ç›‘æµ‹å’ŒæŒ‡æ ‡ä¸Šä¼ ç­‰åŠŸèƒ½ã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šåœ¨åˆå§‹åŒ–æ—¶è§£ææ¨¡å‹çš„URLï¼Œè¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶å¯åŠ¨å¿ƒè·³ç›‘æµ‹ã€‚
3. **ä¿¡å·å¤„ç†**ï¼šæ³¨å†Œä¿¡å·å¤„ç†å™¨ä»¥ä¼˜é›…åœ°å¤„ç†ç¨‹åºç»ˆæ­¢ä¿¡å·ï¼Œç¡®ä¿åœ¨æ”¶åˆ°ä¿¡å·æ—¶åœæ­¢å¿ƒè·³å¹¶é€€å‡ºç¨‹åºã€‚
4. **ä¸Šä¼ æŒ‡æ ‡**ï¼šæä¾›ä¸Šä¼ æ¨¡å‹è®­ç»ƒæŒ‡æ ‡çš„åŠŸèƒ½ã€‚
5. **è·å–æ¨¡å‹**ï¼šä»Ultralytics HUBè·å–æ¨¡å‹æ•°æ®ã€‚
6. **ä¸Šä¼ æ¨¡å‹**ï¼šä¸Šä¼ æ¨¡å‹æ£€æŸ¥ç‚¹åˆ°Ultralytics HUBï¼Œæ”¯æŒä¸Šä¼ å½“å‰æ¨¡å‹å’Œæœ€ç»ˆæ¨¡å‹ã€‚
7. **å¿ƒè·³ç›‘æµ‹**ï¼šå®šæœŸå‘Ultralytics HUBå‘é€å¿ƒè·³è¯·æ±‚ï¼Œä»¥æŠ¥å‘Šä»£ç†çš„çŠ¶æ€ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯Ultralytics YOLOæ¨¡å‹çš„ä¸€ä¸ªè®­ç»ƒä¼šè¯ç®¡ç†ç±»ï¼Œåä¸º`HUBTrainingSession`ï¼Œä¸»è¦ç”¨äºå¤„ç†ä¸Ultralytics HUBçš„äº¤äº’ï¼ŒåŒ…æ‹¬æ¨¡å‹çš„åˆå§‹åŒ–ã€å¿ƒè·³ç›‘æµ‹å’Œæ£€æŸ¥ç‚¹ä¸Šä¼ ç­‰åŠŸèƒ½ã€‚

åœ¨ç±»çš„åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œé¦–å…ˆä¼šè§£æä¼ å…¥çš„æ¨¡å‹æ ‡è¯†ç¬¦`url`ï¼Œå¦‚æœ`url`æ˜¯ä»¥Ultralytics HUBçš„æ¨¡å‹ç½‘å€å¼€å¤´çš„ï¼Œåˆ™æå–å‡ºæ¨¡å‹çš„å…³é”®éƒ¨åˆ†ã€‚æ¥ç€ï¼Œä½¿ç”¨`Auth`ç±»è¿›è¡Œèº«ä»½éªŒè¯ï¼Œè®¾ç½®ä¸€äº›åŸºæœ¬å±æ€§ï¼Œå¦‚`agent_id`ã€`model_id`ã€`model_url`å’Œ`api_url`ç­‰ã€‚æ­¤å¤–ï¼Œè¿˜å®šä¹‰äº†ä¸€äº›é€Ÿç‡é™åˆ¶å’Œå®šæ—¶å™¨ï¼Œä»¥æ§åˆ¶APIè°ƒç”¨çš„é¢‘ç‡ã€‚æ¨¡å‹æ•°æ®é€šè¿‡è°ƒç”¨`_get_model`æ–¹æ³•ä»HUBè·å–ï¼Œå¹¶å¯åŠ¨å¿ƒè·³ç›‘æµ‹ä»¥ä¿æŒä¸æœåŠ¡å™¨çš„è¿æ¥ã€‚

ç±»ä¸­æœ‰ä¸€ä¸ªä¿¡å·å¤„ç†æ–¹æ³•`_register_signal_handlers`ï¼Œç”¨äºæ³¨å†Œç»ˆæ­¢ä¿¡å·çš„å¤„ç†å‡½æ•°ï¼Œä»¥ä¾¿åœ¨æ¥æ”¶åˆ°ç»ˆæ­¢ä¿¡å·æ—¶èƒ½å¤Ÿä¼˜é›…åœ°å…³é—­å¿ƒè·³ç›‘æµ‹ã€‚`_handle_signal`æ–¹æ³•åœ¨æ¥æ”¶åˆ°ä¿¡å·æ—¶ä¼šåœæ­¢å¿ƒè·³å¹¶é€€å‡ºç¨‹åºã€‚

`upload_metrics`æ–¹æ³•ç”¨äºå°†æ¨¡å‹çš„æŒ‡æ ‡ä¸Šä¼ åˆ°Ultralytics HUBã€‚`_get_model`æ–¹æ³•åˆ™è´Ÿè´£ä»HUBè·å–æ¨¡å‹æ•°æ®ï¼Œå¹¶æ ¹æ®æ¨¡å‹çš„çŠ¶æ€ï¼ˆå¦‚æ–°æ¨¡å‹ã€æ­£åœ¨è®­ç»ƒçš„æ¨¡å‹ç­‰ï¼‰è®¾ç½®è®­ç»ƒå‚æ•°ã€‚

`upload_model`æ–¹æ³•ç”¨äºå°†æ¨¡å‹çš„æ£€æŸ¥ç‚¹ä¸Šä¼ åˆ°HUBï¼Œæ”¯æŒä¸Šä¼ å½“å‰è®­ç»ƒçš„æƒé‡æ–‡ä»¶ï¼Œå¹¶æ ¹æ®æ˜¯å¦æ˜¯æœ€ä½³æ¨¡å‹æˆ–æœ€ç»ˆæ¨¡å‹æ¥è°ƒæ•´ä¸Šä¼ çš„æ•°æ®ã€‚

æœ€åï¼Œ`_start_heartbeat`æ–¹æ³•æ˜¯ä¸€ä¸ªçº¿ç¨‹å‡½æ•°ï¼Œç”¨äºå®šæœŸå‘HUBå‘é€å¿ƒè·³è¯·æ±‚ï¼ŒæŠ¥å‘Šä»£ç†çš„çŠ¶æ€ã€‚è¿™æ˜¯é€šè¿‡å¾ªç¯å®ç°çš„ï¼Œç¡®ä¿åœ¨ä¼šè¯å­˜æ´»æœŸé—´æŒç»­å‘é€å¿ƒè·³ä¿¡å·ã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯ç®¡ç†YOLOæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼Œç¡®ä¿ä¸Ultralytics HUBçš„é¡ºç•…é€šä¿¡ï¼Œå¹¶å¤„ç†æ¨¡å‹çš„ä¸Šä¼ å’ŒçŠ¶æ€ç›‘æµ‹ã€‚

#### 11.4 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\clearml.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
# å¯¼å…¥å¿…è¦çš„åº“
from ultralytics.utils import LOGGER, SETTINGS, TESTS_RUNNING

# å°è¯•å¯¼å…¥ ClearML åº“å¹¶è¿›è¡Œä¸€äº›åŸºæœ¬çš„éªŒè¯
try:
    assert not TESTS_RUNNING  # ç¡®ä¿ä¸æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒä¸­
    assert SETTINGS['clearml'] is True  # ç¡®ä¿ ClearML é›†æˆå·²å¯ç”¨
    import clearml
    from clearml import Task
    from clearml.binding.frameworks.pytorch_bind import PatchPyTorchModelIO
    from clearml.binding.matplotlib_bind import PatchedMatplotlib

    assert hasattr(clearml, '__version__')  # ç¡®ä¿ ClearML æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åŒ…

except (ImportError, AssertionError):
    clearml = None  # å¦‚æœå¯¼å…¥å¤±è´¥ï¼Œè®¾ç½® clearml ä¸º None


def _log_debug_samples(files, title='Debug Samples') -> None:
    """
    åœ¨ ClearML ä»»åŠ¡ä¸­è®°å½•è°ƒè¯•æ ·æœ¬ï¼ˆå›¾åƒï¼‰ã€‚

    å‚æ•°:
        files (list): æ–‡ä»¶è·¯å¾„åˆ—è¡¨ï¼Œä½¿ç”¨ PosixPath æ ¼å¼ã€‚
        title (str): ç”¨äºåˆ†ç»„ç›¸åŒå€¼å›¾åƒçš„æ ‡é¢˜ã€‚
    """
    import re

    task = Task.current_task()  # è·å–å½“å‰ä»»åŠ¡
    if task:
        for f in files:
            if f.exists():  # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
                it = re.search(r'_batch(\d+)', f.name)  # æå–æ‰¹æ¬¡å·
                iteration = int(it.groups()[0]) if it else 0  # è·å–è¿­ä»£æ¬¡æ•°
                task.get_logger().report_image(title=title,
                                               series=f.name.replace(it.group(), ''),
                                               local_path=str(f),
                                               iteration=iteration)  # è®°å½•å›¾åƒ


def on_pretrain_routine_start(trainer):
    """åœ¨é¢„è®­ç»ƒä¾‹ç¨‹å¼€å§‹æ—¶è¿è¡Œï¼›åˆå§‹åŒ–å¹¶è¿æ¥/è®°å½•ä»»åŠ¡åˆ° ClearMLã€‚"""
    try:
        task = Task.current_task()  # è·å–å½“å‰ä»»åŠ¡
        if task:
            # ç¦ç”¨è‡ªåŠ¨çš„ PyTorch å’Œ Matplotlib ç»‘å®š
            PatchPyTorchModelIO.update_current_task(None)
            PatchedMatplotlib.update_current_task(None)
        else:
            # åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ ClearML ä»»åŠ¡
            task = Task.init(project_name=trainer.args.project or 'YOLOv8',
                             task_name=trainer.args.name,
                             tags=['YOLOv8'],
                             output_uri=True,
                             reuse_last_task_id=False,
                             auto_connect_frameworks={
                                 'pytorch': False,
                                 'matplotlib': False})
            LOGGER.warning('ClearML Initialized a new task. If you want to run remotely, '
                           'please add clearml-init and connect your arguments before initializing YOLO.')
        task.connect(vars(trainer.args), name='General')  # è¿æ¥è®­ç»ƒå‚æ•°
    except Exception as e:
        LOGGER.warning(f'WARNING âš ï¸ ClearML installed but not initialized correctly, not logging this run. {e}')


def on_train_epoch_end(trainer):
    """åœ¨ YOLO è®­ç»ƒçš„æ¯ä¸ª epoch ç»“æŸæ—¶è®°å½•è°ƒè¯•æ ·æœ¬å¹¶æŠ¥å‘Šå½“å‰è®­ç»ƒè¿›åº¦ã€‚"""
    task = Task.current_task()  # è·å–å½“å‰ä»»åŠ¡
    if task:
        if trainer.epoch == 1:  # ä»…åœ¨ç¬¬ä¸€ä¸ª epoch è®°å½•è°ƒè¯•æ ·æœ¬
            _log_debug_samples(sorted(trainer.save_dir.glob('train_batch*.jpg')), 'Mosaic')
        # æŠ¥å‘Šå½“å‰è®­ç»ƒè¿›åº¦
        for k, v in trainer.validator.metrics.results_dict.items():
            task.get_logger().report_scalar('train', k, v, iteration=trainer.epoch)


def on_train_end(trainer):
    """åœ¨è®­ç»ƒå®Œæˆæ—¶è®°å½•æœ€ç»ˆæ¨¡å‹åŠå…¶åç§°ã€‚"""
    task = Task.current_task()  # è·å–å½“å‰ä»»åŠ¡
    if task:
        # è®°å½•æœ€ç»ˆç»“æœï¼Œæ··æ·†çŸ©é˜µ + PR å›¾
        files = [
            'results.png', 'confusion_matrix.png', 'confusion_matrix_normalized.png',
            *(f'{x}_curve.png' for x in ('F1', 'PR', 'P', 'R'))]
        files = [(trainer.save_dir / f) for f in files if (trainer.save_dir / f).exists()]  # è¿‡æ»¤å­˜åœ¨çš„æ–‡ä»¶
        for f in files:
            _log_plot(title=f.stem, plot_path=f)  # è®°å½•å›¾è¡¨
        # æŠ¥å‘Šæœ€ç»ˆæŒ‡æ ‡
        for k, v in trainer.validator.metrics.results_dict.items():
            task.get_logger().report_single_value(k, v)
        # è®°å½•æœ€ç»ˆæ¨¡å‹
        task.update_output_model(model_path=str(trainer.best), model_name=trainer.args.name, auto_delete_file=False)


# å®šä¹‰å›è°ƒå‡½æ•°
callbacks = {
    'on_pretrain_routine_start': on_pretrain_routine_start,
    'on_train_epoch_end': on_train_epoch_end,
    'on_train_end': on_train_end} if clearml else {}
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **å¯¼å…¥éƒ¨åˆ†**ï¼šå¯¼å…¥å¿…è¦çš„åº“å’Œæ¨¡å—ï¼Œç¡®ä¿ ClearML é›†æˆå¯ç”¨ã€‚
2. **_log_debug_samples å‡½æ•°**ï¼šç”¨äºè®°å½•è°ƒè¯•æ ·æœ¬ï¼ˆå›¾åƒï¼‰ï¼Œåœ¨ ClearML ä»»åŠ¡ä¸­ä»¥å›¾åƒå½¢å¼å±•ç¤ºã€‚
3. **on_pretrain_routine_start å‡½æ•°**ï¼šåœ¨é¢„è®­ç»ƒå¼€å§‹æ—¶åˆå§‹åŒ– ClearML ä»»åŠ¡ï¼Œå¹¶ç¦ç”¨è‡ªåŠ¨ç»‘å®šã€‚
4. **on_train_epoch_end å‡½æ•°**ï¼šåœ¨æ¯ä¸ªè®­ç»ƒ epoch ç»“æŸæ—¶è®°å½•è°ƒè¯•æ ·æœ¬å’Œè®­ç»ƒè¿›åº¦ã€‚
5. **on_train_end å‡½æ•°**ï¼šåœ¨è®­ç»ƒç»“æŸæ—¶è®°å½•æœ€ç»ˆæ¨¡å‹åŠå…¶ç›¸å…³ç»“æœï¼ŒåŒ…æ‹¬æ··æ·†çŸ©é˜µå’Œå…¶ä»–æŒ‡æ ‡ã€‚
6. **å›è°ƒå‡½æ•°å­—å…¸**ï¼šæ ¹æ®æ˜¯å¦æˆåŠŸå¯¼å…¥ ClearMLï¼Œå®šä¹‰ç›¸åº”çš„å›è°ƒå‡½æ•°ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ç”¨äºåœ¨YOLOv8è®­ç»ƒè¿‡ç¨‹ä¸­ä¸ClearMLè¿›è¡Œé›†æˆçš„å›è°ƒå‡½æ•°å®ç°ã€‚ClearMLæ˜¯ä¸€ä¸ªç”¨äºæœºå™¨å­¦ä¹ å®éªŒç®¡ç†å’Œå¯è§†åŒ–çš„å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·è®°å½•å’Œç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§ä¿¡æ¯ã€‚

æ–‡ä»¶å¼€å¤´é¦–å…ˆå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„æ¨¡å—ï¼Œå¹¶è¿›è¡Œäº†ä¸€äº›åŸºæœ¬çš„æ£€æŸ¥ï¼Œç¡®ä¿ClearMLçš„é›†æˆå·²å¯ç”¨ä¸”æ²¡æœ‰åœ¨æµ‹è¯•æ¨¡å¼ä¸‹è¿è¡Œã€‚å¦‚æœå¯¼å…¥å¤±è´¥æˆ–æ¡ä»¶ä¸æ»¡è¶³ï¼ŒClearMLå°†è¢«è®¾ç½®ä¸º`None`ï¼Œåç»­çš„ä»£ç å°†ä¸ä¼šæ‰§è¡Œã€‚

æ¥ä¸‹æ¥å®šä¹‰äº†ä¸€äº›è¾…åŠ©å‡½æ•°ã€‚`_log_debug_samples`å‡½æ•°ç”¨äºå°†è°ƒè¯•æ ·æœ¬ï¼ˆå¦‚å›¾åƒæ–‡ä»¶ï¼‰è®°å½•åˆ°å½“å‰çš„ClearMLä»»åŠ¡ä¸­ã€‚å®ƒæ¥å—æ–‡ä»¶è·¯å¾„åˆ—è¡¨å’Œæ ‡é¢˜ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†å­˜åœ¨çš„æ–‡ä»¶è®°å½•ä¸ºå›¾åƒã€‚`_log_plot`å‡½æ•°åˆ™ç”¨äºå°†ä¿å­˜çš„å›¾åƒæ–‡ä»¶ä½œä¸ºå›¾è¡¨è®°å½•åˆ°ClearMLä¸­ï¼Œåˆ©ç”¨Matplotlibåº“è¯»å–å›¾åƒå¹¶è¿›è¡Œå±•ç¤ºã€‚

åœ¨`on_pretrain_routine_start`å‡½æ•°ä¸­ï¼Œå½“é¢„è®­ç»ƒä¾‹ç¨‹å¼€å§‹æ—¶ï¼Œä¼šåˆå§‹åŒ–å¹¶è¿æ¥å½“å‰çš„ClearMLä»»åŠ¡ã€‚å¦‚æœå½“å‰æ²¡æœ‰ä»»åŠ¡ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ï¼Œå¹¶è®¾ç½®ä¸€äº›å‚æ•°ï¼Œå¦‚é¡¹ç›®åç§°å’Œä»»åŠ¡åç§°ã€‚æ­¤æ—¶ï¼Œè‡ªåŠ¨çš„PyTorchå’ŒMatplotlibç»‘å®šä¼šè¢«ç¦ç”¨ï¼Œä»¥ä¾¿æ‰‹åŠ¨è®°å½•ç›¸å…³ä¿¡æ¯ã€‚

`on_train_epoch_end`å‡½æ•°åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è¢«è°ƒç”¨ã€‚å®ƒä¼šåœ¨ç¬¬ä¸€è½®è®­ç»ƒç»“æŸæ—¶è®°å½•è°ƒè¯•æ ·æœ¬ï¼Œå¹¶æŠ¥å‘Šå½“å‰çš„è®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å„ç§æŒ‡æ ‡çš„å€¼ã€‚

`on_fit_epoch_end`å‡½æ•°åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è®°å½•æ¨¡å‹ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯åœ¨ç¬¬ä¸€ä¸ªå‘¨æœŸç»“æŸæ—¶ï¼Œä¼šè®°å½•æ¨¡å‹çš„ç›¸å…³ä¿¡æ¯ä»¥ä¾›åç»­åˆ†æã€‚

`on_val_end`å‡½æ•°åœ¨éªŒè¯ç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œç”¨äºè®°å½•éªŒè¯ç»“æœï¼ŒåŒ…æ‹¬æ ‡ç­¾å’Œé¢„æµ‹ç»“æœã€‚

æœ€åï¼Œ`on_train_end`å‡½æ•°åœ¨è®­ç»ƒå®Œæˆæ—¶è¢«è°ƒç”¨ï¼Œè®°å½•æœ€ç»ˆæ¨¡å‹åŠå…¶åç§°ï¼Œå¹¶å°†æœ€ç»ˆçš„ç»“æœï¼ˆå¦‚æ··æ·†çŸ©é˜µå’Œå„ç§æ›²çº¿å›¾ï¼‰è®°å½•åˆ°ClearMLä¸­ã€‚

æ–‡ä»¶çš„æœ€åéƒ¨åˆ†å®šä¹‰äº†ä¸€ä¸ªå›è°ƒå­—å…¸ï¼Œå°†ä¸Šè¿°å‡½æ•°ä¸ç‰¹å®šçš„è®­ç»ƒäº‹ä»¶å…³è”èµ·æ¥ï¼Œä»¥ä¾¿åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è‡ªåŠ¨è°ƒç”¨è¿™äº›å‡½æ•°è¿›è¡Œè®°å½•å’Œç›‘æ§ã€‚å¦‚æœClearMLæœªè¢«æ­£ç¡®å¯¼å…¥æˆ–åˆå§‹åŒ–ï¼Œåˆ™è¯¥å­—å…¸å°†ä¸ºç©ºï¼Œæ„å‘³ç€ä¸ä¼šè¿›è¡Œä»»ä½•è®°å½•ã€‚

#### 11.5 code\ultralytics\models\utils\loss.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å¹¶æ·»åŠ è¯¦ç»†ä¸­æ–‡æ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import torch
import torch.nn as nn
import torch.nn.functional as F
from ultralytics.utils.loss import FocalLoss, VarifocalLoss
from ultralytics.utils.metrics import bbox_iou
from .ops import HungarianMatcher

class DETRLoss(nn.Module):
    """
    DETR (DEtection TRansformer) æŸå¤±ç±»ã€‚è¯¥ç±»è®¡ç®—å¹¶è¿”å›DETRç›®æ ‡æ£€æµ‹æ¨¡å‹çš„ä¸åŒæŸå¤±ç»„ä»¶ã€‚
    åŒ…æ‹¬åˆ†ç±»æŸå¤±ã€è¾¹ç•Œæ¡†æŸå¤±ã€GIoUæŸå¤±ï¼Œä»¥åŠå¯é€‰çš„è¾…åŠ©æŸå¤±ã€‚
    """

    def __init__(self, nc=80, loss_gain=None, aux_loss=True, use_fl=True, use_vfl=False):
        """
        åˆå§‹åŒ–DETRæŸå¤±å‡½æ•°ã€‚

        å‚æ•°:
            nc (int): ç±»åˆ«æ•°é‡ã€‚
            loss_gain (dict): å„ç§æŸå¤±ç»„ä»¶çš„ç³»æ•°ã€‚
            aux_loss (bool): æ˜¯å¦è®¡ç®—è¾…åŠ©æŸå¤±ã€‚
            use_fl (bool): æ˜¯å¦ä½¿ç”¨FocalLossã€‚
            use_vfl (bool): æ˜¯å¦ä½¿ç”¨VarifocalLossã€‚
        """
        super().__init__()

        # è®¾ç½®æŸå¤±ç³»æ•°ï¼Œé»˜è®¤å€¼
        if loss_gain is None:
            loss_gain = {"class": 1, "bbox": 5, "giou": 2}
        self.nc = nc  # ç±»åˆ«æ•°é‡
        self.loss_gain = loss_gain  # æŸå¤±ç³»æ•°
        self.aux_loss = aux_loss  # æ˜¯å¦ä½¿ç”¨è¾…åŠ©æŸå¤±
        self.matcher = HungarianMatcher(cost_gain={"class": 2, "bbox": 5, "giou": 2})  # åŒ¹é…å™¨
        self.fl = FocalLoss() if use_fl else None  # Focal Losså¯¹è±¡
        self.vfl = VarifocalLoss() if use_vfl else None  # Varifocal Losså¯¹è±¡
        self.device = None  # è®¾å¤‡

    def _get_loss_class(self, pred_scores, targets, gt_scores, num_gts):
        """è®¡ç®—åˆ†ç±»æŸå¤±ã€‚"""
        bs, nq = pred_scores.shape[:2]  # è·å–æ‰¹æ¬¡å¤§å°å’ŒæŸ¥è¯¢æ•°é‡
        one_hot = torch.zeros((bs, nq, self.nc + 1), dtype=torch.int64, device=targets.device)  # åˆå§‹åŒ–one-hotç¼–ç 
        one_hot.scatter_(2, targets.unsqueeze(-1), 1)  # å°†ç›®æ ‡å€¼è½¬æ¢ä¸ºone-hotç¼–ç 
        one_hot = one_hot[..., :-1]  # å»æ‰æœ€åä¸€ç±»ï¼ˆèƒŒæ™¯ç±»ï¼‰
        gt_scores = gt_scores.view(bs, nq, 1) * one_hot  # è®¡ç®—çœŸå®å¾—åˆ†

        # è®¡ç®—åˆ†ç±»æŸå¤±
        if self.fl:
            loss_cls = self.vfl(pred_scores, gt_scores, one_hot) if num_gts else self.fl(pred_scores, one_hot.float())
            loss_cls /= max(num_gts, 1) / nq  # å½’ä¸€åŒ–æŸå¤±
        else:
            loss_cls = nn.BCEWithLogitsLoss(reduction="none")(pred_scores, gt_scores).mean(1).sum()  # ä½¿ç”¨BCEæŸå¤±

        return {"loss_class": loss_cls.squeeze() * self.loss_gain["class"]}  # è¿”å›åˆ†ç±»æŸå¤±

    def _get_loss_bbox(self, pred_bboxes, gt_bboxes):
        """è®¡ç®—è¾¹ç•Œæ¡†æŸå¤±å’ŒGIoUæŸå¤±ã€‚"""
        loss = {}
        if len(gt_bboxes) == 0:  # å¦‚æœæ²¡æœ‰çœŸå®è¾¹ç•Œæ¡†
            loss["loss_bbox"] = torch.tensor(0.0, device=self.device)
            loss["loss_giou"] = torch.tensor(0.0, device=self.device)
            return loss

        # è®¡ç®—L1æŸå¤±
        loss["loss_bbox"] = self.loss_gain["bbox"] * F.l1_loss(pred_bboxes, gt_bboxes, reduction="sum") / len(gt_bboxes)
        # è®¡ç®—GIoUæŸå¤±
        loss["loss_giou"] = 1.0 - bbox_iou(pred_bboxes, gt_bboxes, xywh=True, GIoU=True)
        loss["loss_giou"] = loss["loss_giou"].sum() / len(gt_bboxes) * self.loss_gain["giou"]
        return loss  # è¿”å›è¾¹ç•Œæ¡†æŸå¤±å’ŒGIoUæŸå¤±

    def _get_loss(self, pred_bboxes, pred_scores, gt_bboxes, gt_cls):
        """è·å–æ€»æŸå¤±ã€‚"""
        match_indices = self.matcher(pred_bboxes, pred_scores, gt_bboxes, gt_cls)  # è·å–åŒ¹é…ç´¢å¼•
        idx, gt_idx = self._get_index(match_indices)  # è·å–ç´¢å¼•
        pred_bboxes, gt_bboxes = pred_bboxes[idx], gt_bboxes[gt_idx]  # æ ¹æ®ç´¢å¼•é€‰æ‹©é¢„æµ‹å’ŒçœŸå®è¾¹ç•Œæ¡†

        # è®¡ç®—ç›®æ ‡å€¼
        bs, nq = pred_scores.shape[:2]
        targets = torch.full((bs, nq), self.nc, device=pred_scores.device, dtype=gt_cls.dtype)
        targets[idx] = gt_cls[gt_idx]

        gt_scores = torch.zeros([bs, nq], device=pred_scores.device)
        if len(gt_bboxes):
            gt_scores[idx] = bbox_iou(pred_bboxes.detach(), gt_bboxes, xywh=True).squeeze(-1)

        # è®¡ç®—æŸå¤±
        loss = {}
        loss.update(self._get_loss_class(pred_scores, targets, gt_scores, len(gt_bboxes)))  # åˆ†ç±»æŸå¤±
        loss.update(self._get_loss_bbox(pred_bboxes, gt_bboxes))  # è¾¹ç•Œæ¡†æŸå¤±
        return loss  # è¿”å›æ€»æŸå¤±

    def forward(self, pred_bboxes, pred_scores, batch):
        """
        å‰å‘ä¼ æ’­è®¡ç®—æŸå¤±ã€‚

        å‚æ•°:
            pred_bboxes (torch.Tensor): é¢„æµ‹çš„è¾¹ç•Œæ¡†ã€‚
            pred_scores (torch.Tensor): é¢„æµ‹çš„å¾—åˆ†ã€‚
            batch (dict): åŒ…å«çœŸå®æ ‡ç­¾çš„å­—å…¸ã€‚

        è¿”å›:
            (dict): åŒ…å«æ€»æŸå¤±çš„å­—å…¸ã€‚
        """
        self.device = pred_bboxes.device  # è®¾ç½®è®¾å¤‡
        gt_cls, gt_bboxes = batch["cls"], batch["bboxes"]  # è·å–çœŸå®æ ‡ç­¾å’Œè¾¹ç•Œæ¡†

        total_loss = self._get_loss(pred_bboxes[-1], pred_scores[-1], gt_bboxes, gt_cls)  # è®¡ç®—æ€»æŸå¤±

        if self.aux_loss:  # å¦‚æœä½¿ç”¨è¾…åŠ©æŸå¤±
            total_loss.update(self._get_loss_aux(pred_bboxes[:-1], pred_scores[:-1], gt_bboxes, gt_cls))  # è®¡ç®—è¾…åŠ©æŸå¤±

        return total_loss  # è¿”å›æ€»æŸå¤±
```

### ä»£ç è¯´æ˜
1. **DETRLossç±»**ï¼šè¯¥ç±»è´Ÿè´£è®¡ç®—DETRæ¨¡å‹çš„æŸå¤±ï¼ŒåŒ…æ‹¬åˆ†ç±»æŸå¤±ã€è¾¹ç•Œæ¡†æŸå¤±å’ŒGIoUæŸå¤±ã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šè®¾ç½®ç±»åˆ«æ•°é‡ã€æŸå¤±ç³»æ•°ã€æ˜¯å¦ä½¿ç”¨è¾…åŠ©æŸå¤±ç­‰å‚æ•°ã€‚
3. **æŸå¤±è®¡ç®—æ–¹æ³•**ï¼š
   - `_get_loss_class`ï¼šè®¡ç®—åˆ†ç±»æŸå¤±ã€‚
   - `_get_loss_bbox`ï¼šè®¡ç®—è¾¹ç•Œæ¡†æŸå¤±å’ŒGIoUæŸå¤±ã€‚
   - `_get_loss`ï¼šæ•´åˆåˆ†ç±»æŸå¤±å’Œè¾¹ç•Œæ¡†æŸå¤±ã€‚
4. **å‰å‘ä¼ æ’­æ–¹æ³•**ï¼šæ¥æ”¶é¢„æµ‹çš„è¾¹ç•Œæ¡†å’Œå¾—åˆ†ï¼Œä»¥åŠçœŸå®æ ‡ç­¾ï¼Œè®¡ç®—å¹¶è¿”å›æ€»æŸå¤±ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªç”¨äºç›®æ ‡æ£€æµ‹æ¨¡å‹çš„æŸå¤±è®¡ç®—ç±»ï¼Œä¸»è¦æ˜¯åŸºäºDETRï¼ˆDEtection TRansformerï¼‰æ¨¡å‹çš„æŸå¤±å‡½æ•°ã€‚æ–‡ä»¶ä¸­åŒ…å«äº†ä¸¤ä¸ªä¸»è¦çš„ç±»ï¼š`DETRLoss`å’Œ`RTDETRDetectionLoss`ï¼Œåè€…æ˜¯å‰è€…çš„æ‰©å±•ã€‚

`DETRLoss`ç±»çš„æ„é€ å‡½æ•°æ¥æ”¶å¤šä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡ã€æŸå¤±ç³»æ•°ã€æ˜¯å¦è®¡ç®—è¾…åŠ©æŸå¤±ã€æ˜¯å¦ä½¿ç”¨Focal Losså’ŒVarifocal Lossç­‰ã€‚è¯¥ç±»çš„ä¸»è¦åŠŸèƒ½æ˜¯è®¡ç®—ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„ä¸åŒæŸå¤±ç»„ä»¶ï¼ŒåŒ…æ‹¬åˆ†ç±»æŸå¤±ã€è¾¹ç•Œæ¡†æŸå¤±å’ŒGIoUï¼ˆå¹¿ä¹‰äº¤å¹¶æ¯”ï¼‰æŸå¤±ã€‚ç±»ä¸­è¿˜å®šä¹‰äº†ä¸€äº›æ–¹æ³•æ¥è®¡ç®—è¿™äº›æŸå¤±ã€‚

åœ¨`_get_loss_class`æ–¹æ³•ä¸­ï¼Œè®¡ç®—åˆ†ç±»æŸå¤±ã€‚å®ƒé¦–å…ˆå°†ç›®æ ‡å€¼è½¬æ¢ä¸ºone-hotç¼–ç ï¼Œç„¶åæ ¹æ®æ˜¯å¦ä½¿ç”¨Focal Lossæˆ–Varifocal Lossæ¥è®¡ç®—æŸå¤±ã€‚åˆ†ç±»æŸå¤±çš„è®¡ç®—æ–¹å¼æ˜¯é€šè¿‡æ¯”è¾ƒé¢„æµ‹çš„åˆ†æ•°å’ŒçœŸå®çš„ç›®æ ‡ç±»ã€‚

`_get_loss_bbox`æ–¹æ³•è®¡ç®—è¾¹ç•Œæ¡†æŸå¤±å’ŒGIoUæŸå¤±ã€‚å¯¹äºæ²¡æœ‰çœŸå®è¾¹ç•Œæ¡†çš„æƒ…å†µï¼ŒæŸå¤±è¢«è®¾ç½®ä¸ºé›¶ã€‚å¦åˆ™ï¼Œä½¿ç”¨L1æŸå¤±è®¡ç®—è¾¹ç•Œæ¡†çš„æŸå¤±ï¼Œå¹¶é€šè¿‡è®¡ç®—é¢„æµ‹è¾¹ç•Œæ¡†ä¸çœŸå®è¾¹ç•Œæ¡†ä¹‹é—´çš„GIoUæ¥è®¡ç®—GIoUæŸå¤±ã€‚

`_get_loss_aux`æ–¹æ³•ç”¨äºè®¡ç®—è¾…åŠ©æŸå¤±ï¼Œä¸»è¦æ˜¯é’ˆå¯¹æ¨¡å‹çš„æ¯ä¸€å±‚è§£ç å™¨çš„è¾“å‡ºè¿›è¡ŒæŸå¤±è®¡ç®—ã€‚å®ƒä¼šè°ƒç”¨`_get_loss`æ–¹æ³•æ¥è·å–æ¯ä¸€å±‚çš„æŸå¤±ï¼Œå¹¶å°†è¿™äº›æŸå¤±æ±‡æ€»ã€‚

`_get_loss`æ–¹æ³•æ˜¯æŸå¤±è®¡ç®—çš„æ ¸å¿ƒï¼Œé¦–å…ˆé€šè¿‡åŒˆç‰™åˆ©åŒ¹é…ç®—æ³•è·å–åŒ¹é…çš„ç´¢å¼•ï¼Œç„¶åè®¡ç®—åˆ†ç±»æŸå¤±å’Œè¾¹ç•Œæ¡†æŸå¤±ã€‚

`forward`æ–¹æ³•æ˜¯ç±»çš„å…¥å£ï¼Œæ¥æ”¶é¢„æµ‹çš„è¾¹ç•Œæ¡†å’Œåˆ†æ•°ï¼Œä»¥åŠåŒ…å«çœŸå®æ ‡ç­¾çš„æ‰¹æ¬¡æ•°æ®ï¼Œæœ€ç»ˆè¿”å›æ€»æŸå¤±ã€‚

`RTDETRDetectionLoss`ç±»ç»§æ‰¿è‡ª`DETRLoss`ï¼Œå¹¶åœ¨å…¶åŸºç¡€ä¸Šå¢åŠ äº†å¯¹å»å™ªè®­ç»ƒæŸå¤±çš„è®¡ç®—ã€‚å®ƒçš„`forward`æ–¹æ³•é™¤äº†è®¡ç®—æ ‡å‡†çš„æ£€æµ‹æŸå¤±å¤–ï¼Œè¿˜æ£€æŸ¥æ˜¯å¦æä¾›äº†å»å™ªçš„å…ƒæ•°æ®ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è®¡ç®—å»å™ªæŸå¤±ã€‚

æ•´ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº†ä¸€ä¸ªå¤æ‚çš„æŸå¤±è®¡ç®—æœºåˆ¶ï¼Œé€‚ç”¨äºDETRåŠå…¶å˜ç§æ¨¡å‹ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°è¯„ä¼°æ¨¡å‹åœ¨ç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸­çš„è¡¨ç°ã€‚

#### 11.6 train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class DetectionTrainer(BaseTrainer):
    """
    DetectionTrainerç±»æ‰©å±•äº†BaseTrainerç±»ï¼Œç”¨äºåŸºäºæ£€æµ‹æ¨¡å‹çš„è®­ç»ƒã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»ºYOLOæ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œ`train`è¡¨ç¤ºè®­ç»ƒæ¨¡å¼ï¼Œ`val`è¡¨ç¤ºéªŒè¯æ¨¡å¼ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº`rect`æ¨¡å¼ã€‚é»˜è®¤ä¸ºNoneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼ä¸ºè®­ç»ƒæˆ–éªŒè¯
        with torch_distributed_zero_first(rank):  # åœ¨åˆ†å¸ƒå¼æ•°æ®å¹¶è¡Œä¸‹ï¼Œä»…åˆå§‹åŒ–æ•°æ®é›†*.cacheä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        if getattr(dataset, "rect", False) and shuffle:
            LOGGER.warning("WARNING âš ï¸ 'rect=True'ä¸DataLoaderçš„shuffleä¸å…¼å®¹ï¼Œè®¾ç½®shuffle=False")
            shuffle = False
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # æ ¹æ®æ¨¡å¼è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹ä¸€æ‰¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©ä¸€ä¸ªæ–°çš„å°ºå¯¸
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:  # å¦‚æœç¼©æ”¾å› å­ä¸ä¸º1
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼
            batch["img"] = imgs  # æ›´æ–°æ‰¹æ¬¡ä¸­çš„å›¾åƒ
        return batch

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å›ä¸€ä¸ªYOLOæ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def get_validator(self):
        """è¿”å›ç”¨äºYOLOæ¨¡å‹éªŒè¯çš„DetectionValidatorã€‚"""
        self.loss_names = "box_loss", "cls_loss", "dfl_loss"  # å®šä¹‰æŸå¤±åç§°
        return yolo.detect.DetectionValidator(
            self.test_loader, save_dir=self.save_dir, args=copy(self.args), _callbacks=self.callbacks
        )  # è¿”å›éªŒè¯å™¨

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )  # ç»˜åˆ¶å›¾åƒå¹¶ä¿å­˜

    def plot_metrics(self):
        """ä»CSVæ–‡ä»¶ä¸­ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾åƒ
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **DetectionTrainerç±»**ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒYOLOæ£€æµ‹æ¨¡å‹çš„ç±»ï¼Œç»§æ‰¿è‡ªBaseTrainerã€‚
2. **build_datasetæ–¹æ³•**ï¼šæ„å»ºYOLOæ•°æ®é›†ï¼Œæ”¯æŒè®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ï¼Œå¹¶æ ¹æ®æ¨¡å¼é€‰æ‹©ä¸åŒçš„å¢å¼ºæ–¹å¼ã€‚
3. **get_dataloaderæ–¹æ³•**ï¼šæ„é€ æ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒå¤šçº¿ç¨‹å’Œæ•°æ®æ‰“ä¹±ã€‚
4. **preprocess_batchæ–¹æ³•**ï¼šå¯¹è¾“å…¥çš„å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å½’ä¸€åŒ–å’Œå¯èƒ½çš„ç¼©æ”¾ã€‚
5. **get_modelæ–¹æ³•**ï¼šè¿”å›ä¸€ä¸ªYOLOæ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯é€‰æ‹©æ€§åœ°åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
6. **get_validatoræ–¹æ³•**ï¼šè¿”å›ç”¨äºæ¨¡å‹éªŒè¯çš„éªŒè¯å™¨ï¼Œè®°å½•æŸå¤±åç§°ã€‚
7. **plot_training_sampleså’Œplot_metricsæ–¹æ³•**ï¼šç”¨äºå¯è§†åŒ–è®­ç»ƒæ ·æœ¬å’Œè®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„ Python è„šæœ¬ï¼Œå±äº Ultralytics YOLO æ¡†æ¶çš„ä¸€éƒ¨åˆ†ã€‚è¯¥æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º `DetectionTrainer` çš„ç±»ï¼Œç»§æ‰¿è‡ª `BaseTrainer`ï¼Œç”¨äºå¤„ç†ä¸ç›®æ ‡æ£€æµ‹ç›¸å…³çš„è®­ç»ƒè¿‡ç¨‹ã€‚

åœ¨è¿™ä¸ªç±»ä¸­ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª `build_dataset` æ–¹æ³•ï¼Œç”¨äºæ„å»º YOLO æ•°æ®é›†ã€‚è¯¥æ–¹æ³•æ¥æ”¶å›¾åƒè·¯å¾„ã€æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰å’Œæ‰¹é‡å¤§å°ä½œä¸ºå‚æ•°ã€‚å®ƒé€šè¿‡è°ƒç”¨ `build_yolo_dataset` å‡½æ•°æ¥åˆ›å»ºæ•°æ®é›†ï¼Œæ”¯æŒä¸åŒæ¨¡å¼ä¸‹çš„å›¾åƒå¢å¼ºã€‚

æ¥ç€ï¼Œ`get_dataloader` æ–¹æ³•ç”¨äºæ„å»ºæ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒæ—¶åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ã€‚å®ƒæ ¹æ®æ¨¡å¼è®¾ç½®æ˜¯å¦æ‰“ä¹±æ•°æ®ï¼Œå¹¶è¿”å›æ„å»ºå¥½çš„æ•°æ®åŠ è½½å™¨ã€‚

`preprocess_batch` æ–¹æ³•ç”¨äºå¯¹è¾“å…¥çš„å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°†å›¾åƒç¼©æ”¾åˆ°åˆé€‚çš„å¤§å°å¹¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°æ ¼å¼ã€‚è¿™é‡Œè¿˜æ”¯æŒå¤šå°ºåº¦è®­ç»ƒï¼Œéšæœºé€‰æ‹©å›¾åƒå¤§å°è¿›è¡Œè®­ç»ƒã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ï¼Œä»¥ä¾¿æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®å¤„ç†ä¸åŒçš„ç›®æ ‡ç±»åˆ«ã€‚

`get_model` æ–¹æ³•ç”¨äºè¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œæ”¯æŒåŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚

`get_validator` æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºæ¨¡å‹éªŒè¯çš„ `DetectionValidator` å®ä¾‹ï¼Œå¸®åŠ©è¯„ä¼°æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šçš„è¡¨ç°ã€‚

`label_loss_items` æ–¹æ³•ç”¨äºè¿”å›ä¸€ä¸ªåŒ…å«è®­ç»ƒæŸå¤±é¡¹çš„å­—å…¸ï¼Œä¾¿äºç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±å˜åŒ–ã€‚

`progress_string` æ–¹æ³•è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºè®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„è½®æ¬¡ã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ç­‰ä¿¡æ¯ã€‚

`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œå¸®åŠ©å¯è§†åŒ–è®­ç»ƒæ•°æ®çš„è´¨é‡ã€‚

æœ€åï¼Œ`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•åˆ†åˆ«ç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œåˆ›å»ºå¸¦æ ‡ç­¾çš„è®­ç»ƒå›¾ï¼Œè¿›ä¸€æ­¥å¸®åŠ©åˆ†ææ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº† YOLO æ¨¡å‹è®­ç»ƒçš„å®Œæ•´æµç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®é›†æ„å»ºã€æ•°æ®åŠ è½½ã€å›¾åƒé¢„å¤„ç†ã€æ¨¡å‹é…ç½®ã€è®­ç»ƒç›‘æ§å’Œç»“æœå¯è§†åŒ–ç­‰åŠŸèƒ½ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥ç¨‹åºåº“æ˜¯ä¸€ä¸ªç”¨äºç›®æ ‡æ£€æµ‹çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œä¸»è¦å®ç°äº† YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹çš„è®­ç»ƒã€éªŒè¯å’Œæ¨ç†åŠŸèƒ½ã€‚æ•´ä½“æ¶æ„åŒ…æ‹¬å¤šä¸ªæ¨¡å—ï¼Œå„è‡ªè´Ÿè´£ä¸åŒçš„åŠŸèƒ½ï¼Œæ¶µç›–äº†æ•°æ®å¤„ç†ã€æ¨¡å‹è®­ç»ƒã€æŸå¤±è®¡ç®—ã€å›è°ƒæœºåˆ¶ã€å¯è§†åŒ–ç­‰æ–¹é¢ã€‚ä»¥ä¸‹æ˜¯å„ä¸ªæ¨¡å—çš„ä¸»è¦åŠŸèƒ½ï¼š

- **æ•°æ®å¤„ç†**ï¼šè´Ÿè´£æ•°æ®é›†çš„æ„å»ºå’ŒåŠ è½½ï¼Œæ”¯æŒæ•°æ®å¢å¼ºå’Œå¤šå°ºåº¦è®­ç»ƒã€‚
- **æ¨¡å‹è®­ç»ƒ**ï¼šå®ç°äº†è®­ç»ƒè¿‡ç¨‹çš„ç®¡ç†ï¼ŒåŒ…æ‹¬æ¨¡å‹çš„åˆå§‹åŒ–ã€è®­ç»ƒå¾ªç¯ã€æŸå¤±è®¡ç®—å’ŒéªŒè¯ã€‚
- **æŸå¤±è®¡ç®—**ï¼šå®šä¹‰äº†å¤šç§æŸå¤±å‡½æ•°ï¼Œæ”¯æŒç›®æ ‡æ£€æµ‹ä»»åŠ¡çš„æŸå¤±è¯„ä¼°ã€‚
- **å›è°ƒæœºåˆ¶**ï¼šé›†æˆäº†ä¸å¤–éƒ¨å·¥å…·ï¼ˆå¦‚ ClearML å’Œ Ultralytics HUBï¼‰çš„äº¤äº’ï¼Œæ”¯æŒè®­ç»ƒè¿‡ç¨‹ä¸­çš„ç›‘æ§å’Œç»“æœè®°å½•ã€‚
- **å¯è§†åŒ–**ï¼šæä¾›äº†å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºå±•ç¤ºè®­ç»ƒæ ·æœ¬ã€æŸå¤±æ›²çº¿å’Œæ¨¡å‹æ€§èƒ½æŒ‡æ ‡ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                                                      | åŠŸèƒ½æè¿°                                                                                   |
|-----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------|
| `ui.py`                                                                                      | å¯åŠ¨ Streamlit Web åº”ç”¨ï¼Œæä¾›å‘½ä»¤è¡Œå·¥å…·ä»¥è¿è¡ŒæŒ‡å®šçš„ Python è„šæœ¬ã€‚                          |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\instance.py`      | å®šä¹‰å¤„ç†è¾¹ç•Œæ¡†å’Œå®ä¾‹æ•°æ®çš„å·¥å…·ç±»ï¼Œæ”¯æŒè¾¹ç•Œæ¡†çš„æ ¼å¼è½¬æ¢ã€ç´¢å¼•å’Œè®¡ç®—ã€‚                      |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\hub\session.py`        | ç®¡ç†ä¸ Ultralytics HUB çš„è®­ç»ƒä¼šè¯ï¼Œå¤„ç†æ¨¡å‹åˆå§‹åŒ–ã€å¿ƒè·³ç›‘æµ‹å’Œæ£€æŸ¥ç‚¹ä¸Šä¼ ã€‚                  |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\clearml.py` | é›†æˆ ClearML è¿›è¡Œè®­ç»ƒè¿‡ç¨‹ç›‘æ§å’Œç»“æœè®°å½•ï¼Œæ”¯æŒè®°å½•è®­ç»ƒæ ·æœ¬å’ŒæŒ‡æ ‡ã€‚                         |
| `code\ultralytics\models\utils\loss.py`                                                     | å®šä¹‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„æŸå¤±è®¡ç®—ç±»ï¼Œæ”¯æŒåˆ†ç±»æŸå¤±ã€è¾¹ç•Œæ¡†æŸå¤±å’Œ GIoU æŸå¤±çš„è®¡ç®—ã€‚                 |
| `train.py`                                                                                   | å¤„ç† YOLO æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®é›†æ„å»ºã€æ•°æ®åŠ è½½ã€æ¨¡å‹é…ç½®å’Œè®­ç»ƒç›‘æ§ã€‚                  |
| `code\ultralytics\trackers\byte_tracker.py`                                                 | å®ç° ByteTrack ç®—æ³•ï¼Œç”¨äºç›®æ ‡è·Ÿè¸ªï¼Œæ”¯æŒå¤šç›®æ ‡è·Ÿè¸ªçš„åŠŸèƒ½ã€‚                                 |
| `code\ultralytics\models\nas\predict.py`                                                   | å®ç°ç¥ç»æ¶æ„æœç´¢ï¼ˆNASï¼‰æ¨¡å‹çš„æ¨ç†åŠŸèƒ½ï¼Œæ”¯æŒæ¨¡å‹çš„é¢„æµ‹å’Œè¯„ä¼°ã€‚                             |
| `code\ultralytics\models\yolo\segment\val.py`                                              | å¤„ç† YOLO æ¨¡å‹çš„åˆ†å‰²éªŒè¯è¿‡ç¨‹ï¼Œè¯„ä¼°æ¨¡å‹åœ¨åˆ†å‰²ä»»åŠ¡ä¸Šçš„è¡¨ç°ã€‚                                |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\hub.py`  | é›†æˆ Ultralytics HUB çš„å›è°ƒåŠŸèƒ½ï¼Œæ”¯æŒè®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¨¡å‹ä¸Šä¼ å’Œç›‘æ§ã€‚                         |
| `code\ultralytics\models\sam\modules\__init__.py`                                          | å®šä¹‰ SAMï¼ˆSegment Anything Modelï¼‰æ¨¡å—çš„åˆå§‹åŒ–ï¼Œæ”¯æŒæ¨¡å‹çš„å¯¼å…¥å’Œé…ç½®ã€‚                   |
| `code\ultralytics\utils\callbacks\hub.py`                                                   | å¤„ç†ä¸ Ultralytics HUB çš„å›è°ƒæœºåˆ¶ï¼Œæ”¯æŒæ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•°æ®è®°å½•å’Œä¸Šä¼ ã€‚                   |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\plotting.py`      | æä¾›å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±æ›²çº¿ã€æŒ‡æ ‡å’Œæ ·æœ¬å›¾åƒã€‚                           |

è¿™ä¸ªè¡¨æ ¼æ¦‚è¿°äº†æ¯ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç†è§£æ•´ä¸ªç¨‹åºåº“çš„ç»“æ„å’Œå„ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuVlJ5s](https://mbd.pub/o/bread/ZpuVlJ5s)